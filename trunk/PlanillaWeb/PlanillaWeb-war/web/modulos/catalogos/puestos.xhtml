<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.prime.com.tr/ui"
                template="./../../plantillas/defaultTemplate.xhtml">

    <ui:define name="titulo">Cat&aacute;logo de Puestos</ui:define>

    <ui:define name="dialogos"></ui:define>

    <ui:define name="acciones">
        <p:tab title="Acciones">

            <h:panelGrid columns="1">
                <p:commandLink styleClass="opcionMenu" ajax="true" immediate="true"
                               action="#{reclutamiento$concursos.nuevo$vh$action()}" update="panelContenido">
                    <p:graphicImage value="/resources/iconos/new.png"/>
                    <h:outputText value="Nuevo" styleClass="espacioTexto"/>
                </p:commandLink>

                <p:commandLink styleClass="opcionMenu"  ajax="true" immediate="true"
                               action="#{reclutamiento$concursos.consultar$vh$action()}" update="tablaConcursos, panelContenido">
                    <p:graphicImage value="/resources/iconos/search.png"/>
                    <h:outputText value="Consultar" styleClass="espacioTexto"/>
                </p:commandLink>
                <p:commandLink styleClass="opcionMenu"  ajax="true" immediate="true"
                               action="#{reclutamiento$concursos.editar$crud$action()}" update="mensajes, panelContenido">
                    <p:graphicImage value="/resources/iconos/edit.png"/>
                    <h:outputText value="Editar" styleClass="espacioTexto"/>
                </p:commandLink>

            </h:panelGrid>
        </p:tab>

        <p:tab title="Otras acciones">
            <h:panelGrid columns="1">
                <p:commandLink styleClass="opcionMenu textoNormal" value="Cancelar" ajax="true" action="#{reclutamiento$preseleccionAspirante.inicio$action}" update="principalForm:mensajes" onmouseover="this.className='opcionMenu  textonegrita';" onmouseout="this.className='opcionMenu  textonormal';" immediate="true">
                    <p:graphicImage styleClass="ui-icon ui-icon-circle-close" />
                </p:commandLink>
            </h:panelGrid>
        </p:tab>

    </ui:define>

    <ui:define name="titulo">Cat&aacute;logo de Puestos</ui:define>

    <ui:define name="contenido">
        <p:spacer height="5px"/>
        <p:panel id="panelInformacion" style="border:none;" >
            <div>
                <div style="float:left;width: 30%;" >
                    <h:panelGrid columns="4" rendered="#{(SessionBeanADM.estadoAccion eq null) or (SessionBeanADM.estadoAccion eq 0) }"  >
                        <p:graphicImage value="../../resources/imagenes/64/info.png" />
                        <h:outputLabel value="Campos marcardos con " style="font-style: italic;" />
                        <h:outputLabel value="*" styleClass="requerido"/>                                
                        <h:outputLabel value=" son requeridos." style="font-style: italic;" />
                    </h:panelGrid>
                </div>    
                <div style="float:left; width: 70%;"  >
                    <p:toolbar rendered="#{(SessionBeanADM.estadoAccion eq null) or (SessionBeanADM.estadoAccion eq 0) }" 
                               styleClass="toolbarUsuario" >
                        <p:toolbarGroup align="right"  >
                            <p:commandButton id="cmdGuardar" type="push" value="Guardar" image="ui-icon ui-icon-disk" action="#{puestosBackendBean.guardar$crud$action()}"
                                             update="principalForm:mensajes" />  
                        </p:toolbarGroup>
                    </p:toolbar>
                </div>
                <div style="clear:both;" ></div>
            </div>
        </p:panel>
        <p:spacer height="10" rendered="#{(SessionBeanADM.estadoAccion eq null) or (SessionBeanADM.estadoAccion eq 0) }" />
        <p:fieldset legend="Datos del Puesto" rendered="#{(SessionBeanADM.estadoAccion eq null) or (SessionBeanADM.estadoAccion eq 0) }" >
            <p:spacer height="5" />

            <table cellpadding="3px;" >

                <tr valign="middle" >
                    <td><h:outputLabel value="Nombre " /></td>
                    <td colspan="4" >
                        <p:inputText id="Nombre" value="#{puestosBackendBean.nombre}" maxlength="100" required="true" label="Nombre de Puesto"
                                     requiredMessage="El Nombre del Puesto es un campo obligatorio" style="width: 100%;"/>
                    </td>
                </tr>

                <tr valign="middle" >
                    <td><h:outputLabel value="C&oacute;digo Alterno " /></td>
                    <td colspan="4" >
                        <p:inputText id="Codigo" value="#{puestosBackendBean.codigoAlterno}" maxlength="100"  style="width: 100%;"/>
                    </td>
                </tr>

                <tr valign="middle" >
                    <td><h:outputLabel value="Opciones de Puesto" /></td>
                    <td colspan="5" >
                        <h:selectBooleanCheckbox label="Horas Extras" value="#{puestosBackendBean.horasExtras}"  >
                            <h:outputLabel value="Horas Extras" />
                        </h:selectBooleanCheckbox>
                        <p:spacer width="15" />
                        <h:selectBooleanCheckbox label="Horas Dobles" value="#{puestosBackendBean.horasDobles}">
                            <h:outputLabel value="Horas Dobles" />
                        </h:selectBooleanCheckbox>
                        <p:spacer width="15" />
                        <h:selectBooleanCheckbox label="Viaticos" value="#{puestosBackendBean.viaticos}">
                            <h:outputLabel value="Viaticos" />
                        </h:selectBooleanCheckbox>
                        <p:spacer width="15" />
                        <h:selectBooleanCheckbox label="Comisi&oacute;n" value="#{puestosBackendBean.comision}">
                            <h:outputLabel value="Comisi&oacute;n" />
                        </h:selectBooleanCheckbox>
                        <h:selectBooleanCheckbox label="Informaci&oacute;n Confidencial" value="#{puestosBackendBean.informacionConfidencial}">
                            <h:outputLabel value="Informaci&oacute;n Confidencial" />
                        </h:selectBooleanCheckbox>
                    </td>
                </tr>
                <tr>
                    <td><h:outputLabel value="Salario Minimo $" /></td>
                    <td><p:inputText id="txSalarioMin"   value="#{puestosBackendBean.salarioMinimo}"/></td>
                    <td></td>
                    <td><h:outputLabel value="Salario M&aacute;ximo $" /></td>
                    <td><p:inputText id="txSalarioMax"  value="#{puestosBackendBean.salarioMaximo}" /></td>
                </tr>
                <tr>
                    <td><h:outputLabel value="Tipo Puesto" /></td>
                    <td colspan="5">
                        <h:selectOneMenu style="height: 25px;padding-top: 3px;width: 100%;" value="#{puestosBackendBean.tipoPuesto}" >
                            <f:selectItem itemValue="-1" itemLabel="[SELECCIONE EL TIPO DE PUESTO]" />
                            <f:selectItems value="#{puestosBackendBean.listaTipoPuesto}" var="tipoPuesto" itemValue="#{tipoPuesto.tipoPuestoPK.codTipoPuesto}" itemLabel="#{tipoPuesto.nomTipo}" />
                        </h:selectOneMenu>
                    </td>
                </tr>
                <tr>
                    <td><h:outputLabel value="Estado " /></td>
                    <td colspan="5">
                        <h:selectOneMenu id="lstEstadoPuesto" value="#{puestosBackendBean.estado}" style="height: 25px;padding-top: 3px;width: 100%;" required="true" requiredMessage="El Estado del Puesto es un campo obligatorio"  >
                            <f:selectItem itemValue="-1" itemLabel="[SELECCIONE EL ESTADO]" />
                            <f:selectItem itemValue="A" itemLabel="ACTIVO" />
                            <f:selectItem itemValue="I" itemLabel="INACTIVO" />
                        </h:selectOneMenu>
                    </td>
                </tr>
                <tr>
                    <td><h:outputLabel value="Departamento " /></td>
                    <td colspan="5">
                        <h:selectOneMenu id="lstDepartamentos" value="#{puestosBackendBean.departamento}" style="height: 25px;padding-top: 3px;width: 100%;" requiredMessage="El Departamento del Puesto es un campo obligatorio"  >
                            <f:selectItem itemValue="-1" itemLabel="[SELECCIONE EL DEPARTAMENTO]" />
                            <f:selectItems value="#{puestosBackendBean.listaDepartamentos}" var="departamento" itemValue="#{departamento.departamentosPK.codDepto}" itemLabel="#{departamento.nomDepto}" />
                        </h:selectOneMenu>
                    </td>
                </tr>
                <tr>
                    <td><h:outputLabel value="&Aacute;rea " /></td>
                    <td colspan="5">
                        <h:selectOneMenu id="lstAreas" value="#{puestosBackendBean.area}" style="height: 25px;padding-top: 3px;width: 100%;" requiredMessage="El Area del Puesto es un campo obligatorio"  >
                            <f:selectItem itemValue="-1" itemLabel="[SELECCIONE EL AREA]" />
                            <f:selectItems value="#{puestosBackendBean.listaAreas}" var="areas" itemValue="#{areas.areasStaffPK.codArea}" itemLabel="#{areas.nomArea}" />
                        </h:selectOneMenu>
                    </td>
                </tr>

                <tr>
                    <td><h:outputLabel value="Locaciones " /></td>
                    <td colspan="5">
                        <h:selectOneMenu id="lstLocaciones" value="#{puestosBackendBean.locacion}" style="height: 25px;padding-top: 3px;width: 100%;" >
                            <f:selectItem itemValue="-1" itemLabel="[SELECCIONE LOCALIZACION]" />
                            <f:selectItems value="#{puestosBackendBean.listaLocaciones}" var="locacion" itemValue="#{locacion.locacionesPK.codLocacion}" itemLabel="#{locacion.desLocacion}" />
                        </h:selectOneMenu>
                    </td>
                </tr>                

                <tr>
                    <td valign="top" ><h:outputLabel value="Descripci&oacute;n del Puesto " /></td>
                    <td colspan="5"><p:inputTextarea id="txDescPuesto" value="#{puestosBackendBean.descripcion}" style="width: 100%;" required="true" label="Descripci&oacute;n del Puesto" /></td>
                </tr>

                <tr>
                    <td valign="top" ><h:outputLabel value="Objetivo " /></td>
                    <td colspan="5"><p:inputTextarea id="txObjPuesto" value="#{puestosBackendBean.objetivo}" style="width: 100%;" required="true" label="Objetivo del Puesto" /></td>
                </tr>

            </table>
            <p:spacer height="20" />
        </p:fieldset>

        <p:toolbar rendered="#{(SessionBeanADM.estadoAccion eq 2)}" styleClass="toolbarUsuario" >
            <p:toolbarGroup align="right" >
                <p:commandButton value="Eliminar" image="ui-icon ui-icon-circle-minus" ajax="true" onclick="confirmation.show()"/>
            </p:toolbarGroup>
        </p:toolbar>

        <p:spacer height="20" rendered="#{(SessionBeanADM.estadoAccion eq 2) }" />

        <p:fieldset legend="Consulta de Concursos" rendered="#{(SessionBeanADM.estadoAccion eq 2)}" >

            <p:spacer height="20" />
            <p:dataTable id="tablaConcursos"
                         var="concurso" rows="5"  paginator="true" 
                         value="#{reclutamiento$concursos.listaConcursos}"
                         emptyMessage="No se han encontrado Concursos."
                         binding="#{reclutamiento$concursos.tableConcursos}"
                         paginatorAlwaysVisible="true" selectionMode="single" 
                         selection="#{SessionBeanREC.concursoSeleccionado}"
                         rowSelectListener="#{reclutamiento$concursos.onRowSelectConcurso}"  
                         rowUnselectListener="#{reclutamiento$concursos.onRowUnSelectConcurso}"
                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100" >
                <f:facet name="header">
                    <h:outputText value="Concursos"/>
                </f:facet>

                <p:column sortBy="#{concurso.concursoPK.codConcurso}">
                    <f:facet name="header">
                        C&oacute;digo
                    </f:facet>
                    <h:outputLabel value="#{concurso.concursoPK.codConcurso}"/>
                </p:column>

                <p:column filterBy="#{concurso.nombre}" 
                          filterMatchMode="contains"
                          headerText="Nombre del concurso">
                    <h:outputLabel value="#{concurso.nombre}"/>
                </p:column> 

                <p:column sortBy="#{concurso.fechaInicial}">
                    <f:facet name="header">
                        Fecha inicial
                    </f:facet>
                    <h:outputLabel value="#{concurso.fechaInicial}" >
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                    </h:outputLabel>
                </p:column>    

                <p:column sortBy="#{concurso.fechaFinal}">
                    <f:facet name="header">
                        Fecha final
                    </f:facet>
                    <h:outputLabel value="#{concurso.fechaFinal}" >
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                    </h:outputLabel>
                </p:column>         


                <p:column sortBy="#{concurso.numeroPlazas}">
                    <f:facet name="header">
                        N&uacute;mero de plazas
                    </f:facet>
                    <h:outputLabel value="#{concurso.numeroPlazas}" />
                </p:column> 

                <p:column sortBy="#{concurso.puestos.nomPuesto}"
                          filterBy="#{concurso.puestos.nomPuesto}"
                          filterMatchMode="contains">
                    <f:facet name="header">
                        Puesto
                    </f:facet>
                    <h:outputLabel value="#{concurso.puestos.nomPuesto}" />
                </p:column> 

                <p:column filterBy="#{concurso.estadoConcurso.nombre}"
                          filterOptions="#{reclutamiento$concursos.itemEstado}"
                          filterMatchMode="exact" >
                    <f:facet name="header">
                        Estado
                    </f:facet>
                    <h:outputLabel value="#{concurso.estadoConcurso.nombre}" />
                </p:column> 

            </p:dataTable>
            <p:spacer height="20" />    

        </p:fieldset>

        <p:panel id="panelInformacionEdit" style="border:none;" >
            <div>
                <div style="float:left;width: 30%;" >
                    <h:panelGrid columns="4" rendered="#{(SessionBeanADM.estadoAccion eq 1)}"  >
                        <p:graphicImage value="../../resources/imagenes/64/info.png" />
                        <h:outputLabel value="Campos marcardos con " style="font-style: italic;" />
                        <h:outputLabel value="*" styleClass="requerido"/>                                
                        <h:outputLabel value=" son requeridos." style="font-style: italic;" />
                    </h:panelGrid>
                </div>    
                <div style="float:left; width: 70%;"  >
                    <p:toolbar rendered="#{(SessionBeanADM.estadoAccion eq 1)}"  >
                        <p:toolbarGroup align="right" >
                            <p:commandButton id="cmdModificar" type="push" value="Guardar" image="ui-icon ui-icon-disk" action="#{reclutamiento$concursos.guardar$crud$action()}"
                                             update="mensajes, NombreMod, calFecIniMod, calFecFinMod, numPlazasMod, lstPuestoMod, lstEstadoMod" />  
                        </p:toolbarGroup>
                    </p:toolbar>
                </div>
                <div style="clear:both;" ></div>
            </div>
        </p:panel>


        <p:spacer height="20" rendered="#{(SessionBeanADM.estadoAccion eq 1)}" />

        <p:fieldset legend="Editar Datos - Informacion del Concurso" rendered="#{(SessionBeanADM.estadoAccion eq 1)}" >
            <p:spacer height="20" />
            <h:panelGrid columns="2">
                <h:outputLabel value="Nombre: " />
                <p:inputText id="NombreMod" value="#{reclutamiento$concursos.nombreConcurso}" maxlength="100" required="true" 
                             requiredMessage="El Nombre del Concurso es un campo obligatorio" />

                <h:outputLabel value="Fecha Inicial: " />
                <p:calendar id="calFecIniMod" value="#{reclutamiento$concursos.fechaInicial}" showOn="button" required="true" 
                            requiredMessage="La Fecha Inicial del concurso es un campo obligatorio" pattern="dd/MM/yyyy" />

                <h:outputLabel value="Fecha Final: " />
                <p:calendar id="calFecFinMod" value="#{reclutamiento$concursos.fechaFinal}"  showOn="button" required="true"
                            requiredMessage="La Fecha Final del concurso es un campo obligatorio" pattern="dd/MM/yyyy"/>

                <h:outputLabel value="N&#250;mero de plazas: " />
                <p:inputText id="numPlazasMod" value="#{reclutamiento$concursos.numeroPlazas}" maxlength="3" required="true"
                             requiredMessage="El n&#250;mero de Plazas es un campo obligatorio" 
                             converterMessage="Ingrese un número entero de plazas." >
                    <f:convertNumber integerOnly="true"  />
                </p:inputText>

                <h:outputLabel value="Puesto: " />
                <h:selectOneMenu id="lstPuestoMod" value="#{reclutamiento$concursos.puesto}" style="height: 25px;padding-top: 3px;" required="true" requiredMessage="El Puesto del Concurso es un campo obligatorio"  >
                    <f:selectItems value="#{reclutamiento$concursos.listaPuestos}" var="puesto" itemValue="#{puesto.puestosPK.codPuesto}"  itemLabel="#{puesto.nomPuesto}"/>
                </h:selectOneMenu>

                <h:outputLabel value="Estado: " />
                <h:selectOneMenu id="lstEstadoMod" value="#{reclutamiento$concursos.estadoConcurso}" style="height: 25px;padding-top: 3px;" required="true" requiredMessage="El Estado del Concurso es un campo obligatorio"  >
                    <f:selectItems value="#{reclutamiento$concursos.listaEstadoConcurso}" var="estado" itemValue="#{estado.estadoConcursoPK.codigo}"  itemLabel="#{estado.nombre}"/>
                </h:selectOneMenu>

            </h:panelGrid>
            <p:spacer height="20" />
        </p:fieldset>
    </ui:define>

</ui:composition>