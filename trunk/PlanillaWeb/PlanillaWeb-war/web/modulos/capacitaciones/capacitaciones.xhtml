<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.prime.com.tr/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                template="./../../plantillas/defaultTemplate.xhtml"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="dialogos">
        <p:confirmDialog message="&#191; Esta seguro que desea eliminar la Capacitacion seleccionada?"  
                         showEffect="bounce" hideEffect="explode"  modal="true"
                         header="Eliminar Capacitacion" severity="alert" widgetVar="confirmation">  
            <p:commandButton value="Si, estoy seguro" update="mensajes, tablaConcursos" oncomplete="confirmation.hide()"  
                             actionListener="#{capacitaciones$capacitaciones.eliminar$crud$action}" />  
            <p:commandButton value="No" onclick="confirmation.hide()" type="button" />   

        </p:confirmDialog>  
        
        <p:dialog id="dialogBuscaEmp" widgetVar="dialogBuscaEmp" header="Buscar Empleado" showEffect="fold" hideEffect="fold" width="700" height="300">
            <p:dataTable id="tablBusEmp"
                         rows="5" paginator="true"
                         emptyMessage="No hay Empleados que mostrar" onRowSelectComplete="dialogBuscaEmp.hide();"
                         var="emp" update="txtEmp, tlEmp, tblDetalleParticipantes, mensajes, txtEmpAsistencia" 
                         value="#{capacitaciones$capacitaciones.listaEmpleado}"
                         selection="#{SessionBeanCAP.empleadoSeleccionado}"
                         rowSelectListener="#{capacitaciones$capacitaciones.onRowSelectEmpleado}"  
                         selectionMode="single"
                         paginatorAlwaysVisible="true"
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100">
                <p:column headerText="Codigo" filterBy="#{emp.empleadosPK.codEmp}" >
                    <h:outputText value="#{emp.empleadosPK.codEmp}"/>
                </p:column>
                <p:column headerText="Nombre" filterBy="#{jefe.nombreCompleto}" >
                    <h:outputText value="#{emp.nombreCompleto}"/>
                </p:column>
            </p:dataTable>
        </p:dialog>
        
        <p:confirmDialog message="&#191; Esta seguro que desea eliminar al Participante de esta Capacitaci贸n?"  
                         showEffect="bounce" hideEffect="explode"  modal="true"
                         header="Eliminar participante" severity="alert" widgetVar="confirmationParticipante">  
            <p:commandButton value="Si, estoy seguro" update="mensajes, tblDetalleParticipantes" oncomplete="confirmationParticipante.hide()"  
                             actionListener="#{capacitaciones$capacitaciones.eliminar$participante$action}" />  
            <p:commandButton value="No" onclick="confirmationParticipante.hide()" type="button" />   

        </p:confirmDialog>
        
        <p:dialog id="dialogBuscaEmpAsis" widgetVar="dialogBuscaEmpAsis" header="Buscar Empleado" showEffect="fold" hideEffect="fold" width="500" height="350">
            <p:dataTable id="tablBusEmpAsis"
                         rows="3" paginator="true" onRowSelectComplete="dialogBuscaEmpAsis.hide();"
                         emptyMessage="No hay Empleados que mostrar"
                         var="det" update="txtEmpAsistencia, tlEmpAsis, tblAsistencia"
                         value="#{capacitaciones$capacitaciones.listaDetalle}"
                         selection="#{capacitaciones$capacitaciones.detalleSelec}"
                         rowSelectListener="#{capacitaciones$capacitaciones.onRowSelectDetalleAsistencia}"  
                         selectionMode="single"
                         paginatorAlwaysVisible="true"
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100">
                <p:column headerText="Codigo" filterBy="#{det.empleados.empleadosPK.codEmp}" >
                    <h:outputText value="#{det.empleados.empleadosPK.codEmp}"/>
                </p:column>
                <p:column headerText="Nombre" filterBy="#{jefe.nombreCompleto}" >
                    <h:outputText value="#{det.empleados.nombreCompleto}"/>
                </p:column>
                <!--f:facet name="footer">
                    <p:commandButton value="Seleccionar empleado" oncomplete="dialogBuscaEmp.hide();"/>
                </f:facet-->
            </p:dataTable>
        </p:dialog>
    </ui:define>

    <ui:define name="acciones">
        <p:tab title="Acciones">
            <h:panelGrid columns="1">
                
                <p:commandLink styleClass="opcionMenu"  ajax="true" immediate="true"
                               action="#{capacitaciones$capacitaciones.consultar$vh$action()}" update="tablaConcursos, panelContenido">
                    <p:graphicImage value="/resources/iconos/search.png"/>
                    <h:outputText value="Consultar" styleClass="espacioTexto"/>
                </p:commandLink>
                <p:commandLink styleClass="opcionMenu" ajax="true" immediate="true"
                               action="#{capacitaciones$capacitaciones.nuevo$vh$action()}" update="panelContenido">
                    <p:graphicImage value="/resources/iconos/new.png"/>
                    <h:outputText value="Nueva Capacitacion" styleClass="espacioTexto"/>
                </p:commandLink>
                <p:commandLink styleClass="opcionMenu"  ajax="true" immediate="true"
                               action="#{capacitaciones$capacitaciones.editar$cap$action()}" update="mensajes, panelContenido">
                    <p:graphicImage value="/resources/iconos/edit.png"/>
                    <h:outputText value="Editar Capacitacion" styleClass="espacioTexto"/>
                </p:commandLink>
                <p:commandLink styleClass="opcionMenu" ajax="true" immediate="true"
                               action="#{capacitaciones$capacitaciones.participante$ver$action()}" update="tblDetalleParticipantes, panelContenido, tablBusEmp">
                    <p:graphicImage value="/resources/iconos/user-group-new.png"/>
                    <h:outputText value="Participantes" styleClass="espacioTexto"/>
                </p:commandLink>
                <p:commandLink styleClass="opcionMenu" ajax="true" immediate="true"
                               action="#{capacitaciones$capacitaciones.asistencia$ver$action()}" update="tblAsistencia,panelContenido,tablBusEmpAsis">
                    <p:graphicImage value="/resources/iconos/view-pim-journal.png"/>
                    <h:outputText value="Asistencias" styleClass="espacioTexto"/>
                </p:commandLink>
                <p:commandLink styleClass="opcionMenu" ajax="true" immediate="true"
                               action="#{capacitaciones$capacitaciones.notas$ver$action()}" update="tblDetalleNotas, panelContenido, nota, tlNota">
                    <p:graphicImage value="/resources/iconos/user-properties.png"/>
                    <h:outputText value="Notas" styleClass="espacioTexto"/>
                </p:commandLink>
            </h:panelGrid>
        </p:tab>

        <p:tab title="Otras acciones">
            <h:panelGrid columns="1">
                <p:commandLink styleClass="opcionMenu textoNormal" value="Cancelar" ajax="true" action="#{reclutamiento$concursos.inicio$action}" update="principalForm:mensajes" onmouseover="this.className='opcionMenu  textonegrita';" onmouseout="this.className='opcionMenu  textonormal';" immediate="true">
                    <p:graphicImage styleClass="ui-icon ui-icon-circle-close" />
                </p:commandLink>
            </h:panelGrid>
        </p:tab>

    </ui:define>

    <ui:define name="titulo">
        Capacitaciones
    </ui:define>

    <ui:define name="contenido">       

        <p:panel id="panelInformacion" style="border:none;" rendered="#{(SessionBeanADM.estadoAccion eq 2)}" >
            <div>
                <div style="float:left; width: 100%;"  >
                    <p:toolbar rendered="#{(SessionBeanADM.estadoAccion eq 2)}" 
                               styleClass="toolbarUsuario" >
                        <p:toolbarGroup align="right"  >
                            <p:commandButton id="cmdGuardar" type="push" value="Guardar" image="ui-icon ui-icon-disk" action="#{capacitaciones$capacitaciones.guardar$cap$action()}"
                                             update="mensajes, lstStatus, lstInst, Nombre, calFecIni, calFecFin, Duracion, impartida, Razon, costoRazon, lstCapacitador" />  
                        </p:toolbarGroup>
                    </p:toolbar>
                </div>
                <div style="clear:both;" ></div>
            </div>
        </p:panel>

        <p:fieldset legend="Capacitaci&#243;n" rendered="#{(SessionBeanADM.estadoAccion eq 2)}" >
            <h:panelGrid columns="4">
                <h:outputLabel value="Instituci&#243;n: " />
                <h:selectOneMenu id="lstInst" value="#{capacitaciones$capacitaciones.inst}" style="height: 25px;padding-top: 3px; width: 300px;" required="true" requiredMessage="La instituci贸n es un campo obligatorio"  >
                    <f:selectItem itemLabel="Seleccione" itemValue=""/>
                    <f:selectItems value="#{capacitaciones$capacitaciones.listaInst}" var="inst" itemValue="#{inst.institucionesPK.codInsti}"  itemLabel="#{inst.desInsti}"/>
                </h:selectOneMenu>
                <p:spacer rendered="#{(SessionBeanADM.estadoAccion eq 2)}" />
                <p:spacer rendered="#{(SessionBeanADM.estadoAccion eq 2)}" />
                <h:outputLabel value="Nombre: " />
                <p:inputText id="Nombre" value="#{capacitaciones$capacitaciones.nombre}" maxlength="200" required="true" style=" width: 300px;"
                             requiredMessage="El Nombre la Capacitaci贸n es un campo obligatorio" />
                <p:spacer rendered="#{(SessionBeanADM.estadoAccion eq 2)}" />
                <p:spacer rendered="#{(SessionBeanADM.estadoAccion eq 2)}" />
                <h:outputLabel value="Area: " />
                <h:selectOneMenu id="lstArea" value="#{capacitaciones$capacitaciones.codArea}"  style="height: 25px;padding-top: 3px; width: 300px;"
                                 required="true" requiredMessage="El Area es un campo obligatorio">
                    <f:ajax render="lstTema" event="change" execute="lstArea" />
                    <f:selectItem itemLabel="Seleccione" itemValue="-1"/>
                    <f:selectItems value="#{capacitaciones$capacitaciones.listaArea}" var="area" itemValue="#{area.capacitacionAreasPK.codArea}"  itemLabel="#{area.nomArea}"/>
                </h:selectOneMenu>
                <p:spacer rendered="#{(SessionBeanADM.estadoAccion eq 2)}" />
                <p:spacer rendered="#{(SessionBeanADM.estadoAccion eq 2)}" />
                <h:outputLabel value="Tema: " />
                <h:selectOneMenu id="lstTema" value="#{capacitaciones$capacitaciones.codTema}"  style="height: 25px;padding-top: 3px; width: 300px;"
                                 required="true" requiredMessage="El Tema es un campo obligatorio">
                    <f:selectItem itemLabel="Seleccione" itemValue=""/>
                    <f:selectItems value="#{capacitaciones$capacitaciones.listaTemas}" var="tema" itemValue="#{tema.capacitacionTemasPK.codTema}"  itemLabel="#{tema.nomTema}"/>
                </h:selectOneMenu>
                <p:spacer rendered="#{(SessionBeanADM.estadoAccion eq 2)}" />
                <p:spacer rendered="#{(SessionBeanADM.estadoAccion eq 2)}" />
                <h:outputLabel value="Capacitador: " />
                <h:selectOneMenu id="lstCapacitador" value="#{capacitaciones$capacitaciones.codCapacitador}"  style="height: 25px;padding-top: 3px; width: 300px;" required="true" requiredMessage="El Capacitador es un campo obligatorio"  >
                    <f:selectItem itemLabel="Seleccione" itemValue=""/>
                    <f:selectItems value="#{capacitaciones$capacitaciones.listaCapacitadores}" var="capa" itemValue="#{capa.capacitadoresPK.codCapacitador}"  itemLabel="#{capa.nombre}"/>
                </h:selectOneMenu>
                <p:spacer rendered="#{(SessionBeanADM.estadoAccion eq 2)}" />
                <p:spacer rendered="#{(SessionBeanADM.estadoAccion eq 2)}" />
                <h:outputLabel value="Duraci&#243;n (Hrs): " />
                <p:inputText id="Duracion" value="#{capacitaciones$capacitaciones.duracion}" maxlength="100" required="true" 
                             requiredMessage="La duraci&#243;n es un campo obligatorio" />

                <p:spacer rendered="#{(SessionBeanADM.estadoAccion eq 2)}" />
                <p:spacer rendered="#{(SessionBeanADM.estadoAccion eq 2)}" />
                <h:outputLabel value="Fecha Inicial: " />
                <p:calendar id="calFecIni" value="#{capacitaciones$capacitaciones.fechaInicial}" showOn="button" required="true" 
                            requiredMessage="La Fecha Inicial del concurso es un campo obligatorio" pattern="dd/MM/yyyy" />

                <h:outputLabel value="Fecha Final: " />
                <p:calendar id="calFecFin" value="#{capacitaciones$capacitaciones.fechaFinal}"  showOn="button" required="true"
                            requiredMessage="La Fecha Final del concurso es un campo obligatorio" pattern="dd/MM/yyyy"/>

                <h:outputLabel value="Estado: " />
                <h:selectOneMenu id="lstStatus" value="#{capacitaciones$capacitaciones.status}"  style="height: 25px;padding-top: 3px;" 
                                 required="true" requiredMessage="El Puesto del Concurso es un campo obligatorio" disabled="true"  >
                    <f:selectItem itemLabel="Seleccione" itemValue=""/>
                    <f:selectItem itemLabel="Grabado" itemValue="G"/>
                    <f:selectItem itemLabel="Aprobado" itemValue="A"/>
                    <f:selectItem itemLabel="Rechazado" itemValue="R"/>
                    <f:selectItem itemLabel="Realizado" itemValue="RE"/>
                </h:selectOneMenu>
                
            </h:panelGrid>
        </p:fieldset>
        <p:spacer height="20"  rendered="#{(SessionBeanADM.estadoAccion eq 2)}" />
        <p:fieldset rendered="#{(SessionBeanADM.estadoAccion eq 2)}" >
            <h:panelGrid columns="2">
                <h:outputLabel value="Raz&#243;n de la capacitaci&#243;n: " />
                <p:inputText id="Razon" value="#{capacitaciones$capacitaciones.razon}" maxlength="200" style=" width: 300px;"/>

                <h:outputLabel value="Costo Raz&#243;n: " />
                <p:inputText id="costoRazon" value="#{capacitaciones$capacitaciones.costoRazon}" maxlength="11" />
            </h:panelGrid>
            
        </p:fieldset>
        <p:toolbar rendered="#{(SessionBeanADM.estadoAccion eq null) or (SessionBeanADM.estadoAccion eq 0)}" 
                   styleClass="toolbarUsuario" >
            <p:toolbarGroup align="right" >
                <p:commandButton value="Eliminar" image="ui-icon ui-icon-circle-minus" ajax="true" onclick="confirmation.show()"/>
            </p:toolbarGroup>
        </p:toolbar>

        <p:spacer height="20" rendered="#{(SessionBeanADM.estadoAccion eq null) or (SessionBeanADM.estadoAccion eq 0) }" />
        <p:fieldset legend="Consulta de Capacitaciones" rendered="#{(SessionBeanADM.estadoAccion eq null) or (SessionBeanADM.estadoAccion eq 0)}" >
            <p:spacer height="20" rendered="#{(SessionBeanADM.estadoAccion eq null) or (SessionBeanADM.estadoAccion eq 0)}" />
            <p:dataTable id="tablaConcursos"
                         var="capacitacion" rows="5"  paginator="true" 
                         value="#{capacitaciones$capacitaciones.listaCap}"
                         emptyMessage="No se han encontrado Capacitaciones."
                         binding="#{capacitaciones$capacitaciones.tableCapacitaciones}"
                         paginatorAlwaysVisible="true" selectionMode="single" 
                         selection="#{SessionBeanCAP.capacitacionSeleccionada}"
                         rowSelectListener="#{capacitaciones$capacitaciones.onRowSelectConcurso}"  
                         rowUnselectListener="#{capacitaciones$capacitaciones.onRowUnSelectConcurso}"
                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100" >
                <f:facet name="header">
                    <h:outputText value="Capacitaciones"/>
                </f:facet>

                <p:column sortBy="#{capacitacion.capacitacionPK.codCapacitacion}">
                    <f:facet name="header">
                        C&oacute;digo
                    </f:facet>
                    <h:outputLabel value="#{capacitacion.capacitacionPK.codCapacitacion}"/>
                </p:column>

                <p:column filterBy="#{capacitacion.nomCapacitacion}" 
                          filterMatchMode="contains"
                          headerText="Nombre de la capacitacion">
                    <h:outputLabel value="#{capacitacion.nomCapacitacion}"/>
                </p:column> 

                <p:column sortBy="#{capacitacion.instituciones.desInsti}">
                    <f:facet name="header">
                        Institucion
                    </f:facet>
                    <h:outputLabel value="#{capacitacion.instituciones.desInsti}" />
                </p:column> 

                <p:column sortBy="#{capacitacion.fechaDesde}">
                    <f:facet name="header">
                        Fecha inicial
                    </f:facet>
                    <h:outputLabel value="#{capacitacion.fechaDesde}" >
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                    </h:outputLabel>
                </p:column>    

                <p:column sortBy="#{capacitacion.fechaHasta}">
                    <f:facet name="header">
                        Fecha final
                    </f:facet>
                    <h:outputLabel value="#{capacitacion.fechaHasta}" >
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                    </h:outputLabel>
                </p:column>         
                
                <p:column sortBy="#{capacitacion.duracion}"
                          filterBy="#{capacitacion.duracion}"
                          filterMatchMode="contains">
                    <f:facet name="header">
                        Estado
                    </f:facet>
                    <h:selectOneMenu id="lstStatus" value="#{capacitacion.status}"  style="height: 25px;padding-top: 3px;" disabled="true" >
                    <f:selectItem itemLabel="Grabado" itemValue="G"/>
                    <f:selectItem itemLabel="Aprobado" itemValue="A"/>
                    <f:selectItem itemLabel="Rechazado" itemValue="R"/>
                    <f:selectItem itemLabel="Realizado" itemValue="RE"/>
                    <f:selectItem itemLabel="Notificada" itemValue="N"/>
                    <f:selectItem itemLabel="Notificada" itemValue="N"/>
                </h:selectOneMenu>
                </p:column> 

                <p:column sortBy="#{capacitacion.impartidaPor}"
                          filterBy="#{capacitacion.impartidaPor}"
                          filterMatchMode="contains">
                    <f:facet name="header">
                        Impartida por
                    </f:facet>
                    <h:outputLabel value="#{capacitacion.capacitadores.nombre}" />
                </p:column>

            </p:dataTable>
            <p:spacer height="20" rendered="#{(SessionBeanADM.estadoAccion eq null) or (SessionBeanADM.estadoAccion eq 0)}" />    

        </p:fieldset>


        <p:panel id="panelInformacionEdit" style="border:none;" >
            <div>
                <div style="float:left; width: 100%;"  >
                    <p:toolbar rendered="#{(SessionBeanADM.estadoAccion eq 1)}"
                               styleClass="toolbarUsuario" >
                        <p:toolbarGroup align="right"  >
                            <p:commandButton id="cmdModificar" type="push" value="Guardar" image="ui-icon ui-icon-disk" action="#{capacitaciones$capacitaciones.guardar$cap$action()}"
                                             update="mensajes, lstStatus2, lstInst2, Nombre2, calFecIni2, calFecFin2, Duracion2, impartida2, Razon2, costoRazon2, lstCapacitador2" />  
                        </p:toolbarGroup>
                    </p:toolbar>
                </div>
                <div style="clear:both;" ></div>
            </div>
        </p:panel>


        <p:fieldset legend="Editar Datos - Informacion de la capacitacion" rendered="#{(SessionBeanADM.estadoAccion eq 1)}" >

            <h:panelGrid columns="4">
                <h:outputLabel value="Instituci&#243;n: " />
                <h:selectOneMenu id="lstInst2" value="#{capacitaciones$capacitaciones.inst}"  style="height: 25px;padding-top: 3px; width: 300px;" required="true" requiredMessage="La isntituci贸n es un campo obligatorio"  >
                    <f:selectItem itemLabel="Seleccione" itemValue=""/>
                    <f:selectItems value="#{capacitaciones$capacitaciones.listaInst}" var="inst" itemValue="#{inst.institucionesPK.codInsti}"  itemLabel="#{inst.desInsti}"/>
                </h:selectOneMenu>
                <p:spacer/>
                <p:spacer/>
                <h:outputLabel value="Nombre: " />
                <p:inputText id="Nombre2" value="#{capacitaciones$capacitaciones.nombre}" maxlength="200" required="true" style=" width: 300px;"
                             requiredMessage="El Nombre de la Capacitacion es un campo obligatorio" />
                
                <p:spacer/>
                <p:spacer/>
                <h:outputLabel value="Area: " />
                <h:selectOneMenu id="lstArea2" value="#{capacitaciones$capacitaciones.codArea}"  style="height: 25px;padding-top: 3px; width: 300px;"
                                 required="true" requiredMessage="El Area es un campo obligatorio">
                    <f:ajax render="lstTema2" event="change" execute="lstArea2" />
                    <f:selectItem itemLabel="Seleccione" itemValue=""/>
                    <f:selectItems value="#{capacitaciones$capacitaciones.listaArea}" var="area" itemValue="#{area.capacitacionAreasPK.codArea}"  itemLabel="#{area.nomArea}"/>
                </h:selectOneMenu>
                <p:spacer/>
                <p:spacer/>
                <h:outputLabel value="Tema: " />
                <h:selectOneMenu id="lstTema2" value="#{capacitaciones$capacitaciones.codTema}"  style="height: 25px;padding-top: 3px; width: 300px;" 
                                 required="true" requiredMessage="El Tema es un campo obligatorio">
                    <f:selectItem itemLabel="Seleccione" itemValue=""/>
                    <f:selectItems value="#{capacitaciones$capacitaciones.listaTemas}" var="tema" itemValue="#{tema.capacitacionTemasPK.codTema}"  itemLabel="#{tema.nomTema}"/>
                </h:selectOneMenu>
                <p:spacer/>
                <p:spacer/>
                <h:outputLabel value="Capacitador: " />
                <h:selectOneMenu id="lstCapacitador2" value="#{capacitaciones$capacitaciones.codCapacitador}"  style="height: 25px;padding-top: 3px; width: 300px;" required="true" requiredMessage="El Capacitador es un campo obligatorio"  >
                    <f:selectItem itemLabel="Seleccione" itemValue=""/>
                    <f:selectItems value="#{capacitaciones$capacitaciones.listaCapacitadores}" var="capa" itemValue="#{capa.capacitadoresPK.codCapacitador}"  itemLabel="#{capa.nombre}"/>
                </h:selectOneMenu>
                <p:spacer/>
                <p:spacer/>
                <h:outputLabel value="Duraci&#243;n (Hrs): " />
                <p:inputText id="Duracion2" value="#{capacitaciones$capacitaciones.duracion}" maxlength="100" required="true" 
                             requiredMessage="La duraci&#243;n es un campo obligatorio" />
                <p:spacer/>
                <p:spacer/>
                <h:outputLabel value="Fecha Inicial: " />
                <p:calendar id="calFecIni2" value="#{capacitaciones$capacitaciones.fechaInicial}" showOn="button" required="true" 
                            requiredMessage="La Fecha Inicial del concurso es un campo obligatorio" pattern="dd/MM/yyyy" />

                <h:outputLabel value="Fecha Final: " />
                <p:calendar id="calFecFin2" value="#{capacitaciones$capacitaciones.fechaFinal}"  showOn="button" required="true"
                            requiredMessage="La Fecha Final del concurso es un campo obligatorio" pattern="dd/MM/yyyy"/>

                <h:outputLabel value="Estado: " />
                <h:selectOneMenu id="lstStatus2" value="#{capacitaciones$capacitaciones.status}"  style="height: 25px;padding-top: 3px;" required="true" requiredMessage="El Puesto del Concurso es un campo obligatorio"  >
                    <f:selectItem itemLabel="Seleccione" itemValue=""/>
                    <f:selectItem itemLabel="Grabado" itemValue="G"/>
                    <f:selectItem itemLabel="Aprobado" itemValue="A"/>
                    <f:selectItem itemLabel="Rechazado" itemValue="R"/>
                    <f:selectItem itemLabel="Realizado" itemValue="RE"/>
                    <f:selectItem itemLabel="Notificada" itemValue="N"/>
                </h:selectOneMenu>
                
            </h:panelGrid>
            
        </p:fieldset>
        <p:spacer height="20" rendered="#{(SessionBeanADM.estadoAccion eq 1) }"/>
        <p:fieldset rendered="#{(SessionBeanADM.estadoAccion eq 1) }" >
            <h:panelGrid columns="2">
                <h:outputLabel value="Raz&#243;n de la capacitaci&#243;n: " />
                <p:inputText id="Razon2" value="#{capacitaciones$capacitaciones.razon}" maxlength="200" style=" width: 300px;" />

                <h:outputLabel value="Costo Raz&#243;n: " />
                <p:inputText id="costoRazon2" value="#{capacitaciones$capacitaciones.costoRazon}" maxlength="11" />
            </h:panelGrid>
            
        </p:fieldset>
        
        <!--Participantes-->
        <p:spacer height="20" rendered="#{(SessionBeanADM.estadoAccion eq 3) or (SessionBeanADM.estadoAccion eq 4) or (SessionBeanADM.estadoAccion eq 5)}" />

        <p:fieldset legend="Capacitaci&#243;n" rendered="#{(SessionBeanADM.estadoAccion eq 3) or (SessionBeanADM.estadoAccion eq 4) or (SessionBeanADM.estadoAccion eq 5)}" >
            <h:panelGrid columns="4">
                <h:outputLabel value="Nombre: "/>
                <h:outputLabel value="#{capacitaciones$capacitaciones.nomCapacitacion}" style=" font-weight: bold"/>
                <p:spacer/>
                <p:spacer/>
                <h:outputLabel value="Area: " />
                <h:outputLabel value="#{capacitaciones$capacitaciones.nomArea}" style=" font-weight: bold"/>
                <p:spacer/>
                <p:spacer/>
                <h:outputLabel value="Tema: " />
                <h:outputLabel value="#{capacitaciones$capacitaciones.nomTema}" style=" font-weight: bold"/>
                <p:spacer/>
                <p:spacer/>
                <h:outputLabel value="Instituci&#243;n: " />
                <h:outputLabel value="#{capacitaciones$capacitaciones.nomInst}" style=" font-weight: bold"/>
                <p:spacer/>
                <p:spacer/>
                <h:outputLabel value="Capacitador: " />
                <h:outputLabel value="#{capacitaciones$capacitaciones.nomCapacitador}" style=" font-weight: bold"/>
                <p:spacer/>
                <p:spacer/>
                <h:outputLabel value="Fecha Inicial: " />
                <h:outputLabel value="#{capacitaciones$capacitaciones.fechaInicial}" style=" font-weight: bold">
                    <f:convertDateTime pattern="dd/MM/yyyy" />
                </h:outputLabel>
                <h:outputLabel value="Fecha Final: " />
                <h:outputLabel value="#{capacitaciones$capacitaciones.fechaFinal}" style=" font-weight: bold">
                    <f:convertDateTime pattern="dd/MM/yyyy" />
                </h:outputLabel>
                <h:outputLabel value="Estado: " />
                <h:selectOneMenu id="lstStatus3" value="#{capacitaciones$capacitaciones.status}"  style="height: 25px;padding-top: 3px;" disabled="true" >
                    <f:selectItem itemLabel="Seleccione" itemValue=""/>
                    <f:selectItem itemLabel="Grabado" itemValue="G"/>
                    <f:selectItem itemLabel="Aprobado" itemValue="A"/>
                    <f:selectItem itemLabel="Rechazado" itemValue="R"/>
                    <f:selectItem itemLabel="Realizado" itemValue="RE"/>
                    <f:selectItem itemLabel="Notificada" itemValue="N"/>
                </h:selectOneMenu>
                <p:spacer/>
                <p:spacer/>
            </h:panelGrid>
            
            <p:spacer height="20" rendered="#{(SessionBeanADM.estadoAccion eq 3) }"/>
        <p:fieldset rendered="#{(SessionBeanADM.estadoAccion eq 3)}" >
            <h:panelGrid columns="4">
                <p:toolbar id="tlEmpPar" >
                        <p:toolbarGroup align="left">
                            <!--p:inputText value="# {capacitaciones$participantesCapacitacion.nomEmp}" id="txtEmp" immediate="true" style=" width: 300px;"/-->
                            <p:commandButton id="cmdBuscaEmp" onclick="dialogBuscaEmp.show()" value="Agregar Empleado"
                                             type="button" image="ui-icon ui-icon-search" />
                        </p:toolbarGroup>
                    </p:toolbar>
            </h:panelGrid>
            
        </p:fieldset>
      
            
        </p:fieldset>
        <p:spacer height="20" rendered="#{(SessionBeanADM.estadoAccion eq 3) }"/>
        <p:dataTable id="tblDetalleParticipantes"
                         rendered="#{(SessionBeanADM.estadoAccion eq 3) }"
                         rows="3" paginator="true"
                         emptyMessage="No hay Empleados que mostrar"
                         var="detalle" update="txtJefe"
                         value="#{capacitaciones$capacitaciones.listaDetalle}"
                         selection="#{SessionBeanCAP.detalleCapSeleccionada}"
                         rowSelectListener="#{capacitaciones$capacitaciones.onRowSelectDetalle}"  
                         selectionMode="single"
                         paginatorAlwaysVisible="true"
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100">
                <f:facet name="header">
                    <h:outputText value="Participantes"/>
                </f:facet><p:column headerText="Codigo" filterBy="#{detalle.empleados.empleadosPK.codEmp}" >
                    <h:outputText value="#{detalle.empleados.empleadosPK.codEmp}"/>
                </p:column>
                <p:column headerText="Nombre" filterBy="#{detalle.empleados.nombreCompleto}" >
                    <h:outputText value="#{detalle.empleados.nombreCompleto}"/>
                </p:column>
                <p:column headerText="Eliminar">
                    <p:commandButton value="Eliminar" image="ui-icon ui-icon-circle-minus" ajax="true" onclick="confirmationParticipante.show()"/>
                </p:column>
                
            </p:dataTable>
                <div style="float:left; width: 100%;"  >
                    <p:toolbar rendered="#{(SessionBeanADM.estadoAccion eq 3)}" 
                               styleClass="toolbarUsuario" >
                        <p:toolbarGroup align="left"  >
                            <p:commandButton id="cmdEnviar" type="push" value="Generar Correos" image="ui-icon ui-icon-mail-closed" action="#{capacitaciones$capacitaciones.enviar$correo$action()}"
                                             update="mensajes, lstStatus3, tblDetalleParticipantes, tablaConcursos" />  
                        </p:toolbarGroup>
                    </p:toolbar>
                </div>
        
        <!--Asistencia-->
        
        <!--/p:fieldset-->
        <p:spacer height="20" rendered="#{(SessionBeanADM.estadoAccion eq 4) }"/>
        <p:fieldset rendered="#{(SessionBeanADM.estadoAccion eq 4)}" >
            <h:panelGrid columns="4">
                <h:outputLabel value="Empleado"/>
                    <p:toolbar id="tlEmpAsis" >
                        <p:toolbarGroup align="left">
                            <p:inputText value="#{capacitaciones$capacitaciones.nomEmp}" id="txtEmpAsistencia" immediate="true" style=" width: 300px" />
                            <p:commandButton id="cmdBuscaEAsistencia" onclick="dialogBuscaEmpAsis.show()" update="tablBusEmpAsis"
                                             type="button" image="ui-icon ui-icon-search" />
                        </p:toolbarGroup>
                    </p:toolbar>
            </h:panelGrid>
            
        </p:fieldset>
        <p:spacer height="20" rendered="#{(SessionBeanADM.estadoAccion eq 4) }"/>
        <p:dataTable id="tblAsistencia"
                         rendered="#{(SessionBeanADM.estadoAccion eq 4) }"
                         rows="3" paginator="true"
                         emptyMessage="No hay participantes que mostrar"
                         rowEditListener="#{capacitaciones$capacitaciones.rowEditListenerAsistencia}"
                         var="asistencia" update="txtEmp"
                         value="#{capacitaciones$capacitaciones.listaAsistencia}"
                         selection="#{SessionBeanCAP.asistenciaSeleccionada}"
                         selectionMode="single"
                         paginatorAlwaysVisible="true"
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100">
                <f:facet name="header">
                    <h:outputText value="Asistencias"/>
                </f:facet><p:column headerText="Fecha">
                    <h:outputText value="#{asistencia.capacitacionAsistenciaPK.fecha}">
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                    </h:outputText>
                </p:column>
            <p:column headerText="Asistencia">
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:selectBooleanCheckbox value="#{asistencia.asiste}" disabled="true"/>
                        </f:facet>  
                        <f:facet name="input">  
                            <h:selectBooleanCheckbox value="#{asistencia.asiste}"/>  
                        </f:facet>  
                    </p:cellEditor>  
                </p:column>
                <p:column headerText="Guardar Asistencia" >
                    <p:rowEditor />  
                </p:column>
            </p:dataTable>
        
        <!--Notas-->
        <p:spacer height="20" rendered="#{(SessionBeanADM.estadoAccion eq 5) }"/>
        <p:fieldset rendered="#{(SessionBeanADM.estadoAccion eq 5)}" >
            <h:panelGrid columns="4">
                <h:outputLabel value="Nota General: " />
                <p:toolbar id="tlNota" >
                        <p:toolbarGroup align="left">
                            <p:inputText value="#{capacitaciones$capacitaciones.notaCapacitacion}" id="nota" immediate="true" style=" width: 50px;"/>
                            <p:commandButton id="cmdGuardarNota" type="push" image="ui-icon ui-icon-disk" action="#{capacitaciones$capacitaciones.guardar$notaCap$action()}"
                                             update="mensajes, nota"/>
                        </p:toolbarGroup>
                    </p:toolbar>
            </h:panelGrid>
        </p:fieldset>
      <p:spacer height="20" rendered="#{(SessionBeanADM.estadoAccion eq 5) }"/>
        <p:dataTable id="tblDetalleNotas"
                         rendered="#{(SessionBeanADM.estadoAccion eq 5) }"
                         rows="3" paginator="true"
                         emptyMessage="No hay jefes que mostrar"
                         rowEditListener="#{capacitaciones$capacitaciones.rowEditListenerNotas}"
                         var="detalle" update="txtJefe"
                         value="#{capacitaciones$capacitaciones.listaDetalle}"
                         selection="#{SessionBeanCAP.detalleCapSeleccionada}"
                         selectionMode="single"
                         paginatorAlwaysVisible="true"
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100">
                <f:facet name="header">
                    <h:outputText value="Notas"/>
                </f:facet><p:column headerText="Codigo" filterBy="#{detalle.empleados.empleadosPK.codEmp}" >
                    <h:outputText value="#{detalle.empleados.empleadosPK.codEmp}"/>
                </p:column>
                <p:column headerText="Nombre" filterBy="#{detalle.empleados.nombreCompleto}" >
                    <h:outputText value="#{detalle.empleados.nombreCompleto}"/>
                </p:column>
                <p:column headerText="Nota" filterBy="#{detalle.nota}" >
                    <p:cellEditor>  
                        <f:facet name="output">  
                            <h:outputText value="#{detalle.nota}" />  
                        </f:facet>  
                        <f:facet name="input">  
                            <p:inputText value="#{detalle.nota}" style="width:100%" label="Year"/>  
                        </f:facet>  
                    </p:cellEditor>  
                </p:column>
                <p:column headerText="Editar Nota" filterBy="#{detalle.nota}" >
                    <p:rowEditor />  
                </p:column>
            </p:dataTable>


    </ui:define>
</ui:composition>
