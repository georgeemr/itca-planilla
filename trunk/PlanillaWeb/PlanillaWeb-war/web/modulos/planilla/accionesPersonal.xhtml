<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/plantillas/defaultTemplate.xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.prime.com.tr/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:i="http://java.sun.com/jsf/composite/components/presentacion"
                xmlns:ap="http://java.sun.com/jsf/composite/components/accionPersonal" 
                xmlns:d="http://java.sun.com/jsf/composite/components/dialogo" >

    <ui:define name="titulo">
        <h:outputText value="Acciones de personal"/>
    </ui:define>

    <ui:define name="acciones">
        <p:tab id="tabAcciones" title="Otras acciones">
            <h:panelGrid columns="1">
                <p:commandLink styleClass="opcionMenu textoNormal" ajax="true" update="principalForm:mensajes, lstTipos" 
                               onmouseover="this.className='opcionMenu  textonegrita';" onmouseout="this.className='opcionMenu  textonormal';" 
                               oncomplete="#{planilla$accionesPersonal.urlPlantilla}.show();">
                    <p:graphicImage value="/resources/iconos/new.png"/>
                    <h:outputText value="Nuevo" styleClass="espacioTexto"/>
                </p:commandLink>
                <p:commandLink id="editarSolicitud" styleClass="opcionMenu textoNormal" ajax="true" action="acciones/editarSolicitud?faces-redirect=true" onmouseover="this.className='opcionMenu  textonegrita';" onmouseout="this.className='opcionMenu  textonormal';" rendered="#{SessionBeanPLA.accionSeleccionada ne null}">
                    <p:graphicImage value="/resources/iconos/document-edit.png"/>
                    <h:outputText value="Editar Solicitud" styleClass="espacioTexto"/>
                </p:commandLink>
                <p:commandLink id="aprobarSolicitud" rendered="#{(SessionBeanPLA.accionSeleccionada ne null) and ( request.isUserInRole('jefes') or request.isUserInRole('rrhh'))}" styleClass="opcionMenu textoNormal" ajax="true" 
                               action="acciones/aprobarSolicitud?faces-redirect=true" onmouseover="this.className='opcionMenu  textonegrita';" onmouseout="this.className='opcionMenu  textonormal';" >
                    <p:graphicImage value="/resources/iconos/dialog-ok-apply.png"/>
                    <h:outputText value="Aprobar Solicitud" styleClass="espacioTexto"/>
                </p:commandLink>
                <p:commandLink styleClass="opcionMenu textoNormal" ajax="true" action="#{planilla$accionesPersonal.consulta$action}" 
                               update="principalForm:mensajes,tableSolicitud" onmouseover="this.className='opcionMenu  textonegrita';" onmouseout="this.className='opcionMenu  textonormal';">
                    <p:graphicImage value="/resources/iconos/search.png"/>
                    <h:outputText value="Consultar" styleClass="espacioTexto"/>
                </p:commandLink>
                <p:commandLink styleClass="opcionMenu textoNormal" ajax="true" action="calendario?faces-redirect=true" onmouseover="this.className='opcionMenu  textonegrita';" onmouseout="this.className='opcionMenu  textonormal';">
                    <p:graphicImage value="/resources/iconos/view-resource-calendar.png"/>
                    <h:outputText value="Ver calendario" styleClass="espacioTexto"/>
                </p:commandLink>
            </h:panelGrid>
        </p:tab>

        <p:tab title="Otras acciones">
            <h:panelGrid columns="1">
                <p:commandLink styleClass="opcionMenu textoNormal" ajax="true" action="#{planilla$accionesPersonal.inicio$action}" update="principalForm:mensajes" onmouseover="this.className='opcionMenu  textonegrita';" onmouseout="this.className='opcionMenu  textonormal';">
                    <p:graphicImage value="/resources/iconos/application-exit.png"/>
                    <h:outputText value="Cancelar" styleClass="espacioTexto"/>
                </p:commandLink>
            </h:panelGrid>
        </p:tab>
    </ui:define>

    <ui:define name="contenido">
        <p:fieldset id="fieldset1" style="border:none;" >
            <p:spacer height="5" />
            <table width="100%" >
                <tr>
                    <td>
                        <h:panelGrid columns="2">
                            <h:outputLabel value="Acci&oacute;n de Personal" style="font-weight: bold;" />
                            <h:selectOneMenu id="lstAcc" style="height: 25px;padding-top: 3px; width: 250px;" value="#{planilla$accionesPersonal.tipo}">
                                <f:ajax event="change" listener="#{planilla$accionesPersonal.seleccionarAccion}" execute="lstAcc" render="@form" />
                                <f:selectItem  itemValue="-1" itemLabel="[ SELECCIONE UN TIPO DE ACCI&Oacute;N ]" />
                                <f:selectItems value="#{planilla$accionesPersonal.listaTipo}" var="tipoAcc" itemValue="#{tipoAcc.tipoAccionPK.codTipoaccion}" itemLabel="#{tipoAcc.nomTipoaccion}"/>
                            </h:selectOneMenu>
                            <h:outputLabel value="Solicitudes a mostrar:" rendered="#{request.isUserInRole('rrhh') or request.isUserInRole('jefes')}" style="font-weight: bold;" />
                            <h:selectOneRadio id="chkSolicitudes" rendered="#{request.isUserInRole('rrhh') or request.isUserInRole('jefes')}" value="#{planilla$accionesPersonal.solicitudesMostradas}" valueChangeListener="#{planilla$accionesPersonal.listarSolicitudes}" >
                                <f:selectItem itemValue="E" itemLabel="Solicitudes de Empleados" />
                                <f:selectItem itemValue="R" itemLabel="Solicitudes #{request.isUserInRole('rrhh') ? 'Recursos Humanos' : 'Jefe'  }" />
                                <f:ajax event="change" render="tableSolicitud principalForm:mensajes" execute="chkSolicitudes"  />
                            </h:selectOneRadio>
                        </h:panelGrid>
                    </td>
                    <td align="right" >
                        <h:panelGrid columns="6" >
                            <p:spacer width="15" style="background-color:#93BBD1;" />
                            <h:outputLabel value="Solicitud Generada" style="font-weight: bold;" />
                            <p:spacer width="15" style="background-color:#9CD128;" />
                            <h:outputLabel value="Solicitud Aprobada" style="font-weight: bold;" />
                            <p:spacer width="15" style="background-color:#D12525;" />
                            <h:outputLabel value="Solicitud Rechazada" style="font-weight: bold;" />
                        </h:panelGrid>
                    </td>
                </tr>
            </table>
        </p:fieldset>
        <p:spacer height="10px"/>
        <p:dataTable id="tableSolicitud" rows="5" paginator="true" paginatorAlwaysVisible="true"
                     emptyMessage="No hay Solicitudes pendientes para aprobar"
                     var="sol" rendered="true" widgetVar="tableSolicitud"
                     value="#{planilla$accionesPersonal.listaSolicitudes}"
                     selection="#{SessionBeanPLA.accionSeleccionada}"
                     selectionMode="single" update="tabAcciones,editarSolicitud"
                     binding="#{planilla$accionesPersonal.tablaSolicitudes}" 
                     rowStyleClass="#{sol.status eq 'G' ? 'solicitudGenerada' : sol.status eq 'J' ? 'solicitudPreAprobada' : sol.status eq 'A' ? 'solicitudAprobada' : sol.status eq 'R' ? 'solicitudRechazada' : null }"
                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100">
            <f:facet name="header">
                Acciones de personal
            </f:facet>

            <p:column headerText="C&oacute;digo">
                <h:outputText value="#{sol.accionPersonalPK.correlativo}"/>
            </p:column>

            <p:column headerText="Nombre:" filterBy="#{sol.empleados.nombreCompleto}" >
                <h:outputText value="#{sol.empleados.nombreCompleto}"/>
            </p:column>

            <p:column headerText="Acci&oacute;n: " filterBy="#{sol.tipoAccion.nomTipoaccion}" >
                <h:outputText value="#{sol.tipoAccion.nomTipoaccion}"/>
            </p:column>

            <p:column headerText="Estado">
                <h:outputText value="#{sol.accEstado}"/>
            </p:column>

            <p:column headerText="Aprobado Jefe">
                <p:graphicImage value="/resources/iconos/dialog-ok-apply.png" rendered="#{sol.aprobadoJefe eq 'A'}" />
                <p:graphicImage value="/resources/iconos/edit-delete.png" rendered="#{sol.aprobadoJefe eq 'R'}" />
            </p:column>

            <p:column headerText="Aprobado RH">
                <p:graphicImage value="/resources/iconos/dialog-ok-apply.png" rendered="#{sol.aprobadoRh eq 'A'}" />
                <p:graphicImage value="/resources/iconos/edit-delete.png" rendered="#{sol.aprobadoRh eq 'R'}" />
            </p:column>

            <p:column headerText="Fecha Solicitud" sortBy="#{sol.fecha}">
                <h:outputText value="#{sol.fecha}" >
                    <f:convertDateTime pattern="dd/MM/yyyy" />
                </h:outputText>
            </p:column>

            <p:column headerText="Observaci&oacute;n">
                <h:outputText id="lbObservaciones" value="#{(sol.observacion!=null and sol.observacion.length() > 10 )? sol.observacion.subSequence(0, 10):sol.observacion} #{(sol.observacion!=null and sol.observacion.length() > 10 )? '.....':''}" title="#{sol.observacion!=null?sol.observacion:'Ninguna'}" />
                <p:tooltip for="lbObservaciones" showEvent="focus" hideEvent="blur" />  
            </p:column>
        </p:dataTable>     
    </ui:define>

    <ui:define name="dialogos">
        <d:dialogoEmpleados name="dlgEmpSolPermisos" selectionMode="single"
                            title="Listado general de Empleados" selection="#{planilla$accionesPersonal.empleadoAccionPersonal}"
                            update="principalForm:mensajes,principalForm:fieldsetEncabezado" image="/resources/imagenes/64/meeting-participant.png"
                            information="Seleccione un empleado para la solicitud"
                            okAction="#{planilla$accionesPersonal.seleccionarEmpleado}"
                            cancelAction="#{planilla$accionesPersonal.cancelSeleccionarEmpleado}"/>        
        
        <p:dialog id="dialogSolicitudPermiso" widgetVar="dialogSolicitudPermiso" header="#{planilla$accionesPersonal.accionSeleccionada != null ? planilla$accionesPersonal.accionSeleccionada.nomTipoaccion : 'Ninguna Acción Seleccionada'}" showEffect="fold" hideEffect="fold" width="745" height="550" >
            <p:spacer height="10px"/>
            <i:panelInformacion imagen="../../resources/imagenes/64/info.png" />
            <p:spacer height="10px"/>
            <p:fieldset id="fieldsetEncabezado">
                <ap:encabezadoSolicitud dialogoEmpleados="dlgEmpSolPermisos" />
                <table border="0" width="100%" >
                    <tr>
                        <td width="20%;" ><h:outputLabel value="Observaci&oacute;n" style="font-weight: bold;" /></td>
                        <td colspan="3" ><p:inputTextarea id="txtobservacionesSP" style="width:100%;" value="#{planilla$accionesPersonal.solicitudPermiso.observacion}" autoResize="false" /></td>
                    </tr>
                </table>
            </p:fieldset>

            <p:spacer height="10px"/>

            <p:fieldset id="fldPermisos" >

                <table border="0" width="100%" >
                    <tr>
                        <td><i:etiquetaRequerido value="Fecha inicio" styleClass="requerido" /></td>
                        <td><p:calendar id="spFecInicial" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudPermiso.fechaInicial}" selectListener="#{planilla$accionesPersonal.solicitudPermiso.handleFechaInicial}" onSelectUpdate="txtDias" />
                        </td>
                    </tr>
                    <tr>
                        <td><i:etiquetaRequerido value="Fecha fin" styleClass="requerido" /></td>
                        <td><p:calendar id="spFecFinal" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudPermiso.fechaFinal}" selectListener="#{planilla$accionesPersonal.solicitudPermiso.handleFechaFinal}" onSelectUpdate="txtDias"/>
                        </td>
                    </tr>
                    <tr>
                        <td>                            
                            <h:panelGrid columns="2" style="margin:0 0 0 -3px;padding:0;" >
                                <h:outputLabel value="Dias"/>
                            </h:panelGrid>
                        </td>
                        <td>
                            <h:outputLabel id="txtDias"  value="#{planilla$accionesPersonal.solicitudPermiso.dias}" />
                        </td>
                        <td></td>
                        <td>
                            <h:panelGrid columns="2" style="margin:0 0 0 -3px;padding:0;" >
                                <h:outputLabel value="Horas"/>
                            </h:panelGrid>    
                        </td>
                        <td>                
                            <p:inputText id="txtHoras"  value="#{planilla$accionesPersonal.solicitudPermiso.horas}" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:panelGrid columns="2" style="margin:0 0 0 -3px;padding:0;" >
                                <h:outputLabel value="Valor del Descuento"/>
                            </h:panelGrid> 
                        </td>
                        <td>
                            <p:inputText id="txtDescuento"  value="#{planilla$accionesPersonal.solicitudPermiso.descuento}" />
                        </td>
                        <td colspan="3" />
                    </tr>

                    <tr>                   
                        <td><i:etiquetaRequerido value="Tipo Planilla" styleClass="requerido" /></td>
                        <td>                
                            <h:selectOneMenu id="lstTipoPlanilla" style="height: 25px;padding-top: 3px;width: 200px;" label="Tipo Planilla" value="#{planilla$accionesPersonal.solicitudPermiso.tipoPlanilla}" >                       
                                <f:ajax render="lstPlanilla" event="change" execute="lstTipoPlanilla" />
                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE TIPO PLANILLA]" />
                                <f:selectItems value="#{planilla$accionesPersonal.listaTipos}" var="tipo" itemValue="#{tipo.tiposPlanillaPK.codTipopla}" itemLabel="#{tipo.nomTipopla}"/>
                            </h:selectOneMenu>
                        </td>
                        <td></td>
                        <td><i:etiquetaRequerido value="Planilla" styleClass="requerido" /></td>
                        <td>
                            <h:selectOneMenu id="lstPlanilla" style="height: 25px;padding-top: 3px;" label="Planilla" value="#{planilla$accionesPersonal.solicitudPermiso.planilla}" >
                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE PLANILLA]" />
                                <f:selectItems value="#{planilla$accionesPersonal.solicitudPermiso.listaPlanillas}" var="pla" 
                                               itemValue="#{pla.pkAsString}"
                                               itemLabel="#{pla.anio} ------ #{pla.mes} ------ #{pla.numPlanilla}" />
                            </h:selectOneMenu>
                        </td>
                    </tr>
                    <tr>
                        <td></td><td></td><td></td><td></td>
                        <td><h:outputLabel value="A&Ntilde;O-MES-N&Uacute;MERO DE PLANILLA" style="font-weight: bold;color: red;" /></td>
                    </tr>
                </table>

            </p:fieldset>
            <p:spacer height="15" />
            <ap:okCancelAccionPersonal okAction="#{planilla$accionesPersonal.solicitudPermiso.guardarSolicitud$action}" update="principalForm:mensajes,principalForm:tableSolicitud,principalForm:fldPermisos,principalForm:txtobservacionesSP" cancelAction="#{planilla$accionesPersonal.cancelar$action}" onCancelClose="#{planilla$accionesPersonal.urlPlantilla}" />

        </p:dialog>

        <d:dialogoEmpleados name="dlgEmpSolVacaciones" selectionMode="single"
                            title="Listado general de Empleados" selection="#{planilla$accionesPersonal.empleadoAccionPersonal}"
                            update="principalForm:mensajes,principalForm:fieldsetEncabezadoVac" image="/resources/imagenes/64/meeting-participant.png"
                            information="Seleccione un empleado para la solicitud"
                            okAction="#{planilla$accionesPersonal.seleccionarEmpleado}"
                            cancelAction="#{planilla$accionesPersonal.cancelSeleccionarEmpleado}"/>    
                
        <p:dialog id="dialogSolicitudVacaciones" widgetVar="dialogSolicitudVacaciones" header="#{planilla$accionesPersonal.accionSeleccionada != null ? planilla$accionesPersonal.accionSeleccionada.nomTipoaccion : 'Ninguna Acción Seleccionada'}" showEffect="fold" hideEffect="fold" width="770" height="575" >
            <p:spacer height="10px"/>
            <i:panelInformacion imagen="../../resources/imagenes/64/info.png" />
            <p:spacer height="10px"/>

            <p:fieldset id="fieldsetEncabezadoVac">
                <ap:encabezadoSolicitud dialogoEmpleados="dlgEmpSolVacaciones" />
                <table border="0" width="100%" >
                    <tr>
                        <td width="20%" ><h:outputLabel value="Observaci&oacute;n" style="font-weight: bold;" /></td>
                        <td><p:inputTextarea id="txtobservacionesVac" style="width:100%;" value="#{planilla$accionesPersonal.solicitudVacacionesAnuales.observacion}" autoResize="false" /></td>
                    </tr>
                </table>
            </p:fieldset>

            <p:spacer height="10px"/>

            <p:fieldset id="fldVacaciones" >

                <table border="0" width="100%" >
                    <tr>
                        <td colspan="5" >
                            <h:outputLabel value="Periodo de Vacaci&oacute;n a pagar" style="font-weight: bold;" />
                        </td>
                    </tr>
                    <tr>
                        <td><i:etiquetaRequerido value="Fecha inicial" styleClass="requerido" /></td>
                        <td><p:calendar id="vacFecInicialPagar" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudVacacionesAnuales.fechaInicialPeriodoPagar}" />
                        </td>
                        <td></td>
                        <td><i:etiquetaRequerido value="Fecha final" styleClass="requerido" /></td>
                        <td><p:calendar id="vacFecFinalPagar" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudVacacionesAnuales.fechaFinalPeriodoPagar}" />
                        </td>
                    </tr>
                    <tr><td colspan="5" ><p:spacer height="10" /></td></tr>
                    <tr>
                        <td colspan="5" >
                            <h:outputLabel value="Periodo de Vacaci&oacute;n a Gozar" style="font-weight: bold;" />
                        </td>
                    </tr>
                    <tr>
                        <td><i:etiquetaRequerido value="Fecha inicial" styleClass="requerido" /></td>
                        <td><p:calendar id="vacFecInicialGozar" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudVacacionesAnuales.fechaInicialPeriodoGozar}" />
                        </td>
                        <td></td>
                        <td><i:etiquetaRequerido value="Fecha final" styleClass="requerido" /></td>
                        <td><p:calendar id="vacFecFinalGozar" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudVacacionesAnuales.fechaFinalPeriodoGozar}" />
                        </td>
                    </tr>

                    <tr>                   
                        <td><i:etiquetaRequerido value="Tipo Planilla" styleClass="requerido" /></td>
                        <td>                
                            <h:selectOneMenu id="lstTipoPlanillaVac" style="height: 25px;padding-top: 3px;width: 200px;" label="Tipo Planilla" value="#{planilla$accionesPersonal.solicitudVacacionesAnuales.tipoPlanilla}" >                       
                                <f:ajax render="lstPlanillaVac" event="change" execute="lstTipoPlanillaVac" />
                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE TIPO PLANILLA]" />
                                <f:selectItems value="#{planilla$accionesPersonal.listaTipos}" var="tipo" itemValue="#{tipo.tiposPlanillaPK.codTipopla}" itemLabel="#{tipo.nomTipopla}"/>
                            </h:selectOneMenu>
                        </td>
                        <td></td>
                        <td><i:etiquetaRequerido value="Planilla" styleClass="requerido" /></td>
                        <td>
                            <h:selectOneMenu id="lstPlanillaVac" style="height: 25px;padding-top: 3px;" label="Planilla" value="#{planilla$accionesPersonal.solicitudVacacionesAnuales.planilla}" >
                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE PLANILLA]" />
                                <f:selectItems value="#{planilla$accionesPersonal.solicitudVacacionesAnuales.listaPlanillas}" var="pla" 
                                               itemValue="#{pla.pkAsString}"
                                               itemLabel="#{pla.anio} ------ #{pla.mes} ------ #{pla.numPlanilla}" />
                            </h:selectOneMenu>
                        </td>
                    </tr>
                    <tr>
                        <td></td><td></td><td></td><td></td>
                        <td><h:outputLabel value="A&Ntilde;O-MES-N&Uacute;MERO DE PLANILLA" style="font-weight: bold;color: red;" /></td>
                    </tr>
                    <tr>
                        <td>Devengadas</td>
                        <td>
                            <h:selectOneMenu id="lstDevengadoVac" style="height: 25px;padding-top: 3px;" label="Planilla" value="#{planilla$accionesPersonal.solicitudVacacionesAnuales.devengadas}" >
                                <f:selectItem itemValue="S" itemLabel="SI" />
                                <f:selectItem itemValue="N" itemLabel="NO" />
                            </h:selectOneMenu>
                        </td>
                    </tr>
                </table>

            </p:fieldset>
            <p:spacer height="15" />
            <ap:okCancelAccionPersonal okAction="#{planilla$accionesPersonal.solicitudVacacionesAnuales.guardarSolicitud$action}" update="principalForm:mensajes,principalForm:tableSolicitud,principalForm:fldVacaciones,principalForm:txtobservacionesVac" cancelAction="#{planilla$accionesPersonal.cancelar$action}" onCancelClose="#{planilla$accionesPersonal.urlPlantilla}" />

        </p:dialog>

        <d:dialogoEmpleados name="dlgEmpSolIncapacidad" selectionMode="single"
                    title="Listado general de Empleados" selection="#{planilla$accionesPersonal.empleadoAccionPersonal}"
                    update="principalForm:mensajes,principalForm:fieldsetEncabezadoInc" image="/resources/imagenes/64/meeting-participant.png"
                    information="Seleccione un empleado para la solicitud"
                    okAction="#{planilla$accionesPersonal.seleccionarEmpleado}"
                    cancelAction="#{planilla$accionesPersonal.cancelSeleccionarEmpleado}"/> 
        <p:dialog id="dialogSolicitudIncapacidad" widgetVar="dialogSolicitudIncapacidad" header="#{planilla$accionesPersonal.accionSeleccionada != null ? planilla$accionesPersonal.accionSeleccionada.nomTipoaccion : 'Ninguna Acción Seleccionada'}" showEffect="fold" hideEffect="fold" width="770" height="550" >
            <p:spacer height="10px"/>
            <i:panelInformacion imagen="../../resources/imagenes/64/info.png" />
            <p:spacer height="10px"/>

            <p:fieldset id="fieldsetEncabezadoInc">
                <ap:encabezadoSolicitud dialogoEmpleados="dlgEmpSolIncapacidad" />
                <table border="0" width="100%" >
                    <tr>
                        <td width="20%" ><h:outputLabel value="Observaci&oacute;n" style="font-weight: bold;" /></td>
                        <td colspan="3"><p:inputTextarea id="txtobservacionesInc" style="width:100%;" value="#{planilla$accionesPersonal.solicitudIncapacidad.observacion}" /></td>
                    </tr>
                </table>
            </p:fieldset>

            <p:spacer height="10px"/>

            <p:fieldset id="fldIncapacidad" >

                <table border="0" width="100%" >
                    <tr>
                        <td colspan="5" >
                            <h:outputLabel value="Planilla" style="font-weight: bold;" />
                        </td>
                    </tr>
                    <tr>
                        <td><i:etiquetaRequerido value="Fecha Planilla" styleClass="requerido" /></td>
                        <td><p:calendar id="incFecPlanilla" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudIncapacidad.fechaPlanilla}" />
                        </td>
                        <td></td>
                        <td><i:etiquetaRequerido value="Fecha real planilla" styleClass="requerido" /></td>
                        <td><p:calendar id="incFecRealPlanilla" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudIncapacidad.fechaRealPlanilla}" />
                        </td>
                    </tr>
                    <tr><td colspan="5" ><p:spacer height="10" /></td></tr>

                    <tr>
                        <td><i:etiquetaRequerido value="Fecha Inicio Inc." styleClass="requerido" /></td>
                        <td><p:calendar id="incFecInicio" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudIncapacidad.fechaInicial}" selectListener="#{planilla$accionesPersonal.solicitudIncapacidad.handleFechaInicial}" onSelectUpdate="txDiasInc" />
                        </td>
                        <td></td>
                        <td><i:etiquetaRequerido value="Fecha Fin Inc." styleClass="requerido" /></td>
                        <td><p:calendar id="incFecFin" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudIncapacidad.fechaFinal}" selectListener="#{planilla$accionesPersonal.solicitudIncapacidad.handleFechaFinal}" onSelectUpdate="txDiasInc" />
                        </td>
                    </tr>

                    <tr>
                        <td><h:outputLabel value="Dias"/></td>
                        <td>
                            <h:outputLabel id="txDiasInc" value="#{planilla$accionesPersonal.solicitudIncapacidad.dias}" />
                        </td>
                    </tr>

                    <tr>                   
                        <td><i:etiquetaRequerido value="Tipo Planilla" styleClass="requerido" /></td>
                        <td>                
                            <h:selectOneMenu id="lstTipoPlanillaInc" style="height: 25px;padding-top: 3px;width: 200px;" label="Tipo Planilla" value="#{planilla$accionesPersonal.solicitudIncapacidad.tipoPlanilla}" >                       
                                <f:ajax render="lstPlanillaInc" event="change" execute="lstTipoPlanillaInc" />
                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE TIPO PLANILLA]" />
                                <f:selectItems value="#{planilla$accionesPersonal.listaTipos}" var="tipo" itemValue="#{tipo.tiposPlanillaPK.codTipopla}" itemLabel="#{tipo.nomTipopla}"/>
                            </h:selectOneMenu>
                        </td>
                        <td></td>
                        <td><i:etiquetaRequerido value="Planilla" styleClass="requerido" /></td>
                        <td>
                            <h:selectOneMenu id="lstPlanillaInc" style="height: 25px;padding-top: 3px;" label="Planilla" value="#{planilla$accionesPersonal.solicitudIncapacidad.planilla}" >
                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE PLANILLA]" />
                                <f:selectItems value="#{planilla$accionesPersonal.solicitudIncapacidad.listaPlanillas}" var="pla" 
                                               itemValue="#{pla.pkAsString}" itemLabel="#{pla.anio} ------ #{pla.mes} ------ #{pla.numPlanilla}" />
                            </h:selectOneMenu>
                        </td>
                    </tr>
                    <tr><td></td><td></td><td></td><td></td><td><h:outputLabel value="A&Ntilde;O-MES-N&Uacute;MERO DE PLANILLA" style="font-weight: bold;color: red;" /></td></tr>
                </table>

            </p:fieldset>
            <p:spacer height="15" />
            <ap:okCancelAccionPersonal okAction="#{planilla$accionesPersonal.solicitudIncapacidad.guardarSolicitud$action}" update="principalForm:mensajes,principalForm:tableSolicitud,principalForm:fldIncapacidad,principalForm:txtobservacionesInc" cancelAction="#{planilla$accionesPersonal.cancelar$action}" onCancelClose="#{planilla$accionesPersonal.urlPlantilla}" />

        </p:dialog>

        <d:dialogoEmpleados name="dlgEmpSolNombramientos" selectionMode="single"
            title="Listado general de Empleados" selection="#{planilla$accionesPersonal.empleadoAccionPersonal}"
            update="principalForm:mensajes,principalForm:fieldsetEncabezadoNom" image="/resources/imagenes/64/meeting-participant.png"
            information="Seleccione un empleado para la solicitud"
            okAction="#{planilla$accionesPersonal.seleccionarEmpleado}"
            cancelAction="#{planilla$accionesPersonal.cancelSeleccionarEmpleado}"/> 
        <p:dialog id="dialogSolicitudNombramiento" widgetVar="dialogSolicitudNombramiento" header="#{planilla$accionesPersonal.accionSeleccionada != null ? planilla$accionesPersonal.accionSeleccionada.nomTipoaccion : 'Ninguna Acción Seleccionada'}" showEffect="fold" hideEffect="fold" width="770" height="550" >
            <p:spacer height="10px"/>
            <i:panelInformacion imagen="../../resources/imagenes/64/info.png" />
            <p:spacer height="10px"/>

            <p:fieldset id="fieldsetEncabezadoNom">
                <ap:encabezadoSolicitud dialogoEmpleados="dlgEmpSolNombramientos" />
                <table border="0" width="100%" cellpadding="3" >
                    <tr>
                        <td width="20%;"><h:outputLabel value="Observaci&oacute;n" style="font-weight: bold;" /></td>
                        <td colspan="3" width="80%;" ><p:inputTextarea id="txtobservacionesNom" style="width:100%;" value="#{planilla$accionesPersonal.solicitudNombramiento.observacion}" autoResize="false" /></td>
                    </tr>
                </table>
            </p:fieldset>

            <p:spacer height="10px"/>

            <p:fieldset id="fldNombramiento" >

                <table border="0"  >
                    <tr>
                        <td><i:etiquetaRequerido value="Departamento" styleClass="requerido" /></td>
                        <td>                            
                            <h:selectOneMenu style="height: 25px;padding-top: 3px;width: 250px;" value="#{planilla$accionesPersonal.solicitudNombramiento.departamento}" >
                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE UN DEPARTAMENTO]" />
                                <f:selectItems value="#{planilla$accionesPersonal.solicitudNombramiento.listaDepartamentos}" var="departamento" itemValue="#{departamento.departamentosPK.codDepto}" itemLabel="#{departamento.nomDepto}" />
                            </h:selectOneMenu>
                        </td>        
                    </tr>

                    <tr>
                        <td><i:etiquetaRequerido value="Puesto" styleClass="requerido" /></td>
                        <td>                            
                            <h:selectOneMenu style="height: 25px;padding-top: 3px;width: 250px;" value="#{planilla$accionesPersonal.solicitudNombramiento.puesto}" >
                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE UN PUESTO]" />
                                <f:selectItems value="#{planilla$accionesPersonal.solicitudNombramiento.listaPuestos}" var="puesto" itemValue="#{puesto.puestosPK.codPuesto}" itemLabel="#{puesto.nomPuesto}" />
                            </h:selectOneMenu>
                        </td>
                    </tr>

                    <tr>
                        <td><i:etiquetaRequerido value="Fecha inicial" styleClass="requerido" /></td>
                        <td>                            
                            <p:calendar id="nomFecFin" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudNombramiento.fechaInicial}"  />
                        </td>

                    </tr>
                </table>

            </p:fieldset>
            <p:spacer height="15" />
            <ap:okCancelAccionPersonal okAction="#{planilla$accionesPersonal.solicitudNombramiento.guardarSolicitud$action}" update="principalForm:mensajes,principalForm:tableSolicitud,principalForm:fldNombramiento,principalForm:txtobservacionesNom" cancelAction="#{planilla$accionesPersonal.cancelar$action}" onCancelClose="#{planilla$accionesPersonal.urlPlantilla}" />

        </p:dialog>

        <p:dialog id="dialogSolicitudVacColectiva" widgetVar="dialogSolicitudVacColectiva" header="#{planilla$accionesPersonal.accionSeleccionada != null ? planilla$accionesPersonal.accionSeleccionada.nomTipoaccion : 'Ninguna Acción Seleccionada'}" showEffect="fold" hideEffect="fold" width="770" height="550" >
            <p:spacer height="10px"/>
            <i:panelInformacion imagen="../../resources/imagenes/64/info.png" />
            <p:spacer height="10px"/>

            <p:fieldset id="fieldsetEncabezadoVacCol">
                <table border="0" width="100%" >
                    <tr>
                        <td width="15%;"><h:outputLabel style="font-weight: bold;" value="Fecha de Solicitud"/></td>
                        <td width="85%;">
                            <h:outputLabel value="#{planilla$accionesPersonal.fecha}" >
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputLabel>
                        </td>
                    </tr>
                    <tr>
                        <td width="15%;"><h:outputLabel style="font-weight: bold;" value="Observacion"/></td>
                        <td width="85%;"><p:inputTextarea id="txtobservacionesVacCol" style="width:100%;" value="#{planilla$accionesPersonal.solicitudVacacionColectiva.observacion}" autoResize="false" /></td>
                    </tr>
                </table>
            </p:fieldset>

            <p:spacer height="10px"/>

            <p:fieldset id="fldVacColectiva" >

                <table border="0" width="100%" >
                    <tr>
                        <td width="15%;" ><i:etiquetaRequerido value="Criterio a Aplicar" styleClass="requerido" /></td>
                        <td width="85%" >                            
                            <h:selectOneMenu id="lstCriterio" value="#{planilla$accionesPersonal.solicitudVacacionColectiva.criterioSeleccionado}" style="height: 25px;padding-top: 3px;width: 250px;" >
                                <f:selectItem itemValue="-1" itemLabel="[ SELECCIONE UN CRITERIO ]" />
                                <f:selectItem itemValue="departamentos"  itemLabel=" APLICAR POR DEPARTAMENTO " />
                                <f:selectItem itemValue="tipoPlanilla"  itemLabel=" APLICAR POR TIPO DE PLANILLA " />
                                <f:ajax event="change" execute="lstCriterio" listener="#{planilla$accionesPersonal.solicitudVacacionColectiva.limpiarFormaAplicar}" render="fldVacColectiva" />
                            </h:selectOneMenu>
                        </td>        
                    </tr>

                    <tr>
                        <td width="15%" ></td>
                        <td width="85%" >
                            <p:panel id="panelCriteriosDepartamento" style="border:none;" rendered="#{planilla$accionesPersonal.solicitudVacacionColectiva.criterioSeleccionado eq 'departamentos'}" >
                                <h:panelGrid columns="3">
                                    <h:outputLabel value="Departamento:" style="font-weight: bold;" />
                                    <h:selectOneMenu id="lstDeptosSolVacColDep" style="height: 25px;padding-top: 3px;width: 250px;" value="#{planilla$accionesPersonal.solicitudVacacionColectiva.departamento}" >
                                        <f:selectItem itemValue="-1" itemLabel="[SELECCIONE UN DEPARTAMENTO]" />
                                        <f:selectItems value="#{planilla$accionesPersonal.solicitudVacacionColectiva.listaDepartamentos}" var="departamento" itemValue="#{departamento.departamentosPK.codDepto}" itemLabel="#{departamento.nomDepto}" />
                                        <f:ajax event="change" execute="lstDeptosSolVacColDep" listener="#{planilla$accionesPersonal.solicitudVacacionColectiva.calcularAfectados}" render="afectadosDepartamento selectXDepartamento" />
                                    </h:selectOneMenu>
                                    <h:outputLabel value="" />

                                    <h:outputLabel value="Tipo Planilla:" style="font-weight: bold;" />
                                    <h:selectOneMenu id="lstTipoPlanillaSolVacColDep" style="height: 25px;padding-top: 3px;width: 250px;" label="Tipo Planilla" value="#{planilla$accionesPersonal.solicitudVacacionColectiva.tipoPlanillaAplicar}" >                       
                                        <f:ajax render="lstPlanillaTPDep" event="change" execute="lstTipoPlanillaSolVacColDep" />
                                        <f:selectItem itemValue="-1" itemLabel="[SELECCIONE TIPO PLANILLA]" />
                                        <f:selectItems value="#{planilla$accionesPersonal.listaTipos}" var="tipo" itemValue="#{tipo.tiposPlanillaPK.codTipopla}" itemLabel="#{tipo.nomTipopla}"/>
                                        <f:ajax event="change" execute="lstTipoPlanillaSolVacColDep" listener="#{planilla$accionesPersonal.solicitudVacacionColectiva.calcularAfectados}" render="afectadosTipoPlanilla lstPlanillaTPDep" />
                                    </h:selectOneMenu>

                                    <h:panelGroup />
                                    <h:outputLabel value="Planilla" style="font-weight: bold;"/>
                                    <h:selectOneMenu id="lstPlanillaTPDep" style="height: 25px;padding-top: 3px;width: 250px;" label="Planilla" value="#{planilla$accionesPersonal.solicitudVacacionColectiva.planilla}" >
                                        <f:selectItem itemValue="-1" itemLabel="[SELECCIONE PLANILLA]" />
                                        <f:selectItems value="#{planilla$accionesPersonal.solicitudVacacionColectiva.listaPlanillas}" var="pla" 
                                                       itemValue="#{pla.pkAsString}" itemLabel="#{pla.anio} ------ #{pla.mes} ------ #{pla.numPlanilla}" />
                                    </h:selectOneMenu>
                                    <h:panelGroup />
                                    <h:outputLabel value="" />
                                    <h:outputLabel value="A&Ntilde;O-MES-N&Uacute;MERO DE PLANILLA" style="font-weight: bold;color: red;" />
                                    <h:outputLabel value="" />

                                    <h:outputLabel value="Total de afectados:" style="font-weight: bold;" />
                                    <h:panelGroup>
                                        <h:panelGrid columns="2">
                                            <h:outputLabel id="afectadosDepartamento" value="#{planilla$accionesPersonal.solicitudVacacionColectiva.valorAfectados} empleados." styleClass="#{planilla$accionesPersonal.solicitudVacacionColectiva.valorAfectados lt 1 ? 'afectadosMinimo' : 'afectadosMaximo' }" />
                                            <p:commandButton id="selectXDepartamento" value="Seleccionar" update="tableEmpleadosAfectar" action="#{planilla$accionesPersonal.solicitudVacacionColectiva.listarEmpleados}" image="beneficiarios" oncomplete="dialogoEmpleados.show();" />                                                                                
                                        </h:panelGrid>
                                    </h:panelGroup>

                                </h:panelGrid>
                            </p:panel>

                            <p:panel id="panelCriteriosTipoPlanilla" style="border:none;" rendered="#{planilla$accionesPersonal.solicitudVacacionColectiva.criterioSeleccionado eq 'tipoPlanilla'}" >
                                <h:panelGrid columns="3">

                                    <h:outputLabel value="Tipo Planilla:" style="font-weight: bold;" />
                                    <h:selectOneMenu id="lstTipoPlanillaSolVacCol" style="height: 25px;padding-top: 3px;width: 250px;" label="Tipo Planilla" value="#{planilla$accionesPersonal.solicitudVacacionColectiva.tipoPlanilla}" >                       
                                        <f:selectItem itemValue="-1" itemLabel="[SELECCIONE TIPO PLANILLA]" />
                                        <f:selectItems value="#{planilla$accionesPersonal.listaTipos}" var="tipo" itemValue="#{tipo.tiposPlanillaPK.codTipopla}" itemLabel="#{tipo.nomTipopla}"/>
                                        <f:ajax event="change" execute="lstTipoPlanillaSolVacCol" listener="#{planilla$accionesPersonal.solicitudVacacionColectiva.calcularAfectados}" render="afectadosTipoPlanilla selectXTipoPlanilla lstPlanillaTP" />
                                    </h:selectOneMenu>
                                    <h:panelGroup />

                                    <h:outputLabel value="Tipo Planilla aplicar:" style="font-weight: bold;" />
                                    <h:selectOneMenu id="lstTipoPlanilla0SolVacCol" style="height: 25px;padding-top: 3px;width: 250px;" label="Tipo Planilla" value="#{planilla$accionesPersonal.solicitudVacacionColectiva.tipoPlanillaAplicar}" >                       
                                        <f:ajax render="lstPlanillaTP" event="change" execute="lstTipoPlanilla0SolVacCol" />
                                        <f:selectItem itemValue="-1" itemLabel="[SELECCIONE TIPO PLANILLA]" />
                                        <f:selectItems value="#{planilla$accionesPersonal.listaTipos}" var="tipo" itemValue="#{tipo.tiposPlanillaPK.codTipopla}" itemLabel="#{tipo.nomTipopla}"/>                                        
                                    </h:selectOneMenu>
                                    <h:outputLabel value="" />

                                    <h:outputLabel value="Planilla" style="font-weight: bold;" />
                                    <h:selectOneMenu id="lstPlanillaTP" style="height: 25px;padding-top: 3px;width: 250px;" label="Planilla" value="#{planilla$accionesPersonal.solicitudVacacionColectiva.planilla}" >
                                        <f:selectItem itemValue="-1" itemLabel="[SELECCIONE PLANILLA]" />
                                        <f:selectItems value="#{planilla$accionesPersonal.solicitudVacacionColectiva.listaPlanillas}" var="pla" 
                                                       itemValue="#{pla.pkAsString}" itemLabel="#{pla.anio} ------ #{pla.mes} ------ #{pla.numPlanilla}" />
                                    </h:selectOneMenu>
                                    <h:outputLabel value="" /><h:outputLabel value="" /><h:outputLabel value="A&Ntilde;O-MES-N&Uacute;MERO DE PLANILLA" style="font-weight: bold;color: red;" />
                                    <h:outputLabel value="" />
                                    <h:outputLabel value="Total de empleados afectados:" style="font-weight: bold;" />
                                    <h:panelGroup>
                                        <h:panelGrid columns="2"> 
                                            <h:outputLabel id="afectadosTipoPlanilla" value="#{planilla$accionesPersonal.solicitudVacacionColectiva.valorAfectados} empleados." styleClass="#{planilla$accionesPersonal.solicitudVacacionColectiva.valorAfectados lt 1 ? 'afectadosMinimo' : 'afectadosMaximo' }" />
                                            <p:commandButton id="selectXTipoPlanilla" value="Seleccionar" update="tableEmpleadosAfectar" image="beneficiarios" action="#{planilla$accionesPersonal.solicitudVacacionColectiva.listarEmpleados}" oncomplete="dialogoEmpleados.show();" />
                                        </h:panelGrid>
                                    </h:panelGroup>
                                </h:panelGrid>

                            </p:panel>
                        </td>
                    </tr>

                </table>

            </p:fieldset>
            <p:spacer height="15" />
            <ap:okCancelAccionPersonal okAction="#{planilla$accionesPersonal.solicitudVacacionColectiva.guardarSolicitud$action}" update="principalForm:mensajes,principalForm:tableSolicitud,principalForm:fldVacColectiva,txtobservacionesVacCol" cancelAction="#{planilla$accionesPersonal.cancelar$action}" onCancelClose="#{planilla$accionesPersonal.urlPlantilla}" />
        </p:dialog>

        <p:dialog id="dialogoEmpleados" widgetVar="dialogoEmpleados" header="Empleados" width="650" height="445"  resizable="true" showEffect="clip" hideEffect="clip" >  

            <h:panelGrid columns="2" >
                <p:graphicImage value="/resources/imagenes/64/evaluacion32x32.png" />   
                <h:outputLabel id="lbl1" value="Seleccione los empleados que desea incluir "  style="font-weight: bold;"/>
            </h:panelGrid>

            <p:dataTable id="tableEmpleadosAfectar" value="#{planilla$accionesPersonal.solicitudVacacionColectiva.listaEmpleadosAfectar}" var="empleado" 
                         paginator="true" rows="5"  emptyMessage="No se han encontrado Empleados." dynamic="true"  selection="#{planilla$accionesPersonal.solicitudVacacionColectiva.empleadosSeleccionados}"
                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" 
                         rowsPerPageTemplate="5,10,25,50,100" style="margin-top: 20px;" onRowSelectUpdate="principalForm:mensajes,tableEmpleadosAfectar,afectadosTipoPlanilla,afectadosDepartamento" onRowUnselectUpdate="principalForm:mensajes,tableEmpleadosAfectar,afectadosTipoPlanilla,afectadosDepartamento" >

                <f:facet name="header">
                    Empleados
                </f:facet>
                <p:column selectionMode="multiple" style="width:18px" /> 
                <p:column headerText="C&oacute;digo" >  
                    <h:outputLabel value="#{empleado.empleadosPK.codEmp}" />
                </p:column>  

                <p:column headerText="Nombre" filterBy="#{empleado.nombreCompleto}" filterMatchMode="contains" >  
                    <h:outputLabel value="#{empleado.nombreCompleto}" />
                </p:column>  

            </p:dataTable>
            <p:spacer height="15" />
            <h:panelGrid columns="2">
                <p:commandButton value="Aceptar" styleClass="opcionMenu" update="principalForm:mensajes,afectadosTipoPlanilla,afectadosDepartamento" oncomplete="dialogoEmpleados.hide()" action="#{planilla$accionesPersonal.solicitudVacacionColectiva.actualizarAfectados}" image="ui-icon-circle-check" /> 
            </h:panelGrid>
        </p:dialog>    

        <!-- Aumento de Sueldo -->
        <d:dialogoEmpleados name="dlgEmpSolAumentoSueldo" selectionMode="single"
            title="Listado general de Empleados" selection="#{planilla$accionesPersonal.empleadoAccionPersonal}"
            update="principalForm:mensajes,principalForm:fieldsetEncabezadoAuSal" image="/resources/imagenes/64/meeting-participant.png"
            information="Seleccione un empleado para la solicitud"
            okAction="#{planilla$accionesPersonal.seleccionarEmpleado}"
            cancelAction="#{planilla$accionesPersonal.cancelSeleccionarEmpleado}"/> 
        
        <p:dialog id="dialogSolicitudAumentoSueldo" widgetVar="dialogSolicitudAumentoSueldo" header="#{planilla$accionesPersonal.accionSeleccionada != null ? planilla$accionesPersonal.accionSeleccionada.nomTipoaccion : 'Ninguna Acción Seleccionada'}" showEffect="fold" hideEffect="fold" width="770" height="550" >
            <p:spacer height="10px"/>
            <i:panelInformacion imagen="../../resources/imagenes/64/info.png" />
            <p:spacer height="10px"/>
            <p:fieldset id="fieldsetEncabezadoAuSal">
                <ap:encabezadoSolicitud dialogoEmpleados="dlgEmpSolAumentoSueldo" />
                <table border="0" width="100%" cellpadding="3" >
                    <tr>
                        <td width="20%;"><h:outputLabel value="Observaci&oacute;n" style="font-weight: bold;" /></td>
                        <td colspan="2" width="80%;" ><p:inputTextarea id="txtobservacionesAuSal" style="width:100%;" value="#{planilla$accionesPersonal.solicitudAumentoSueldo.observacion}" /></td>
                    </tr>
                </table>
            </p:fieldset>

            <p:spacer height="10px"/>

            <p:fieldset id="fldAumentoSalario" >

                <table border="0" cellpadding="2" >

                    <tr>
                        <td><h:outputLabel value="Criterio:" style="font-weight: bold;" /></td>
                        <td>
                            <h:selectOneRadio id="chkFormaAumento" value="#{planilla$accionesPersonal.solicitudAumentoSueldo.formaAumento}" >
                                <f:selectItem itemValue="P" itemLabel="Aplicar porcentaje" />
                                <f:selectItem itemValue="V" itemLabel="Aplicar valor" />
                                <f:ajax event="change" render="etiquetaValor txValorCalculado lbValorCalculado" execute="chkFormaAumento"  />
                            </h:selectOneRadio>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <h:panelGrid columns="2" style="margin:0 0 0 -3px;padding:0;" >
                                <h:outputLabel id="etiquetaValor" value="#{planilla$accionesPersonal.solicitudAumentoSueldo.formaAumento eq 'V' ? 'Nuevo Sueldo: ': 'Porcentaje: '}" style="font-weight: bold;" />
                                <h:outputLabel value="*" styleClass="requerido"/>                                
                            </h:panelGrid>
                        </td>
                        <td>
                            <p:inputText value="#{planilla$accionesPersonal.solicitudAumentoSueldo.sueldoNuevo}" >
                                <p:ajax event="keyup" update="txValorCalculado" listener="#{planilla$accionesPersonal.solicitudAumentoSueldo.calculoSueldo}" /> 
                            </p:inputText>
                        </td>
                        <td></td>
                        <td><h:outputLabel id="lbValorCalculado" value="#{planilla$accionesPersonal.solicitudAumentoSueldo.formaAumento eq 'P' ? 'Nuevo Valor: ': '' }" style="font-weight: bold;" /></td>
                        <td>
                            <h:outputLabel id="txValorCalculado" value="#{planilla$accionesPersonal.solicitudAumentoSueldo.formaAumento eq 'P' ? planilla$accionesPersonal.solicitudAumentoSueldo.porcentaje : '' }" >
                                <f:convertNumber maxFractionDigits="2"/>
                            </h:outputLabel>    
                        </td>                        
                        <td></td>
                    </tr>
                    <tr>
                        <td><h:outputLabel value="Sueldo Anterior: " style="font-weight: bold;" /></td>

                        <td>
                            <h:outputLabel value="$ #{SessionBeanEMP.empleadoSesion.salario}" style="font-weight: bold;color: red;" >
                                <f:convertNumber maxFractionDigits="2" />
                            </h:outputLabel>
                        </td>
                    </tr>

                    <tr>
                        <td><i:etiquetaRequerido value="Fecha Inicial" styleClass="requerido" /></td>
                        <td>                            
                            <p:calendar id="auSalFecInicial" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudAumentoSueldo.fechaInicial}"  />
                        </td>
                    </tr>

                    <tr>
                        <td><i:etiquetaRequerido value="Tipo Planilla" styleClass="requerido" /></td>
                        <td>
                            <h:selectOneMenu id="lstTipoPlanillaAuSal" style="height: 25px;padding-top: 3px;width: 250px;" label="Tipo Planilla" value="#{planilla$accionesPersonal.solicitudAumentoSueldo.tipoPlanilla}" >                       
                                <f:ajax render="lstPlanillaAuSal" event="change" execute="lstTipoPlanillaAuSal" />
                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE TIPO PLANILLA]" />
                                <f:selectItems value="#{planilla$accionesPersonal.listaTipos}" var="tipo" itemValue="#{tipo.tiposPlanillaPK.codTipopla}" itemLabel="#{tipo.nomTipopla}"/>
                            </h:selectOneMenu>
                        </td>
                        <td></td>
                        <td><i:etiquetaRequerido value="Planilla" styleClass="requerido" /></td>
                        <td>
                            <h:selectOneMenu id="lstPlanillaAuSal" style="height: 25px;padding-top: 3px;width: 250px;" label="Planilla" value="#{planilla$accionesPersonal.solicitudAumentoSueldo.planilla}" >
                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE PLANILLA]" />
                                <f:selectItems value="#{planilla$accionesPersonal.solicitudAumentoSueldo.listaPlanillas}" var="pla" 
                                               itemValue="#{pla.pkAsString}" itemLabel="#{pla.anio} ------ #{pla.mes} ------ #{pla.numPlanilla}" />
                            </h:selectOneMenu>
                        </td>
                    </tr>
                    <tr>
                        <td></td><td></td><td></td><td></td>
                        <td><h:outputLabel value="A&Ntilde;O-MES-N&Uacute;MERO DE PLANILLA" style="font-weight: bold;color: red;" /></td>
                    </tr>
                </table>

            </p:fieldset>
            <p:spacer height="15" />
            <ap:okCancelAccionPersonal okAction="#{planilla$accionesPersonal.solicitudAumentoSueldo.guardarSolicitud$action}" update="principalForm:mensajes,principalForm:tableSolicitud,principalForm:fldAumentoSalario,principalForm:txtobservacionesAuSal" cancelAction="#{planilla$accionesPersonal.cancelar$action}" onCancelClose="#{planilla$accionesPersonal.urlPlantilla}" />
        </p:dialog>

        <!-- Aumento de Sueldo Colectivo -->
        <p:dialog id="dialogSolAumSueldoColectivo" widgetVar="dialogSolAumSueldoColectivo" header="#{planilla$accionesPersonal.accionSeleccionada != null ? planilla$accionesPersonal.accionSeleccionada.nomTipoaccion : 'Ninguna Acción Seleccionada'}" showEffect="fold" hideEffect="fold" width="770" height="575" >
            <p:spacer height="10px"/>
            <i:panelInformacion imagen="../../resources/imagenes/64/info.png" />
            <p:spacer height="10px"/>

            <p:fieldset id="fieldsetEncabezadoAuSalCol">
                <table border="0" width="100%" cellpadding="3" >
                    <tr>
                        <td width="20%;" ><h:outputLabel value="Fecha de Solicitud" style="font-weight: bold;" /></td>
                        <td width="80%;">
                            <h:outputLabel value="#{planilla$accionesPersonal.fecha}" >
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputLabel>
                        </td>
                    </tr>

                    <tr>
                        <td width="20%;"><h:outputLabel value="Observacion" style="font-weight: bold;" /></td>
                        <td colspan="3" width="80%;" ><p:inputTextarea id="txtobservacionesAuSalCol" style="width:100%;" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.observacion}" /></td>
                    </tr>
                </table>
            </p:fieldset>

            <p:spacer height="5"/>

            <p:fieldset id="fldAumentoSalarioCol" >

                <table border="0" cellpadding="2" >
                    <tr>
                        <td width="15%" >
                            <i:etiquetaRequerido value="Criterio a Aplicar" styleClass="requerido" />
                        </td>

                        <td width="85%" colspan="5"  >                            
                            <h:selectOneMenu id="lstCriterioAumSalCol" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.criterioSeleccionado}" style="height: 25px;padding-top: 3px;width: 250px;" >
                                <f:selectItem itemValue="-1" itemLabel="[ SELECCIONE UN CRITERIO ]" />
                                <f:selectItem itemValue="rangoSalario"  itemLabel=" APLICAR POR RANGOS DE SALARIO " />
                                <f:selectItem itemValue="departamentos"  itemLabel=" APLICAR POR DEPARTAMENTOS " />
                                <f:ajax event="change" execute="lstCriterioAumSalCol" listener="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.limpiarFormaAplicar}" render="fldAumentoSalarioCol" />
                            </h:selectOneMenu>
                        </td>        
                    </tr>

                    <tr>
                        <td width="15%"  ></td>
                        <td>
                            <p:panel id="panelRangos" style="border:none;" rendered="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.criterioSeleccionado eq 'rangoSalario' }" >
                                <table width="100%" border="0" >
                                    <tr>
                                        <td width="20%" ><i:etiquetaRequerido value="Valor Inicial $ " styleClass="requerido" /></td>
                                        <td width="20%">
                                            <p:inputText style="width: 80px;" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.salarioMinimo}"  >    
                                                <p:ajax event="blur" update="totalEmpleadosAfectadosSalCol,totalEmpleadosAfectadosSalColV" listener="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.calcularEmpleados}" />  
                                            </p:inputText>
                                        </td>
                                        <td></td>
                                        <td width="20%"><i:etiquetaRequerido value="Valor Final $ " styleClass="requerido" /></td>
                                        <td  width="40%" >
                                            <p:inputText style="width: 80px;" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.salarioMaximo}" >
                                                <p:ajax event="blur" update="totalEmpleadosAfectadosSalCol,,totalEmpleadosAfectadosSalColV" listener="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.calcularEmpleados}" />  
                                            </p:inputText>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="25%" ><h:outputLabel value="Criterio" style="font-weight: bold;" /></td>
                                        <td width="75%" colspan="4" >
                                            <h:selectOneRadio id="chkFormaAumentoSalCol" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.formaAumento}" >
                                                <f:selectItem itemValue="V" itemLabel="Aplicar valor" />
                                                <f:selectItem itemValue="P" itemLabel="Aplicar porcentaje" />
                                                <f:ajax event="change" render="etiquetaValorSalCol lblPorcentaje" execute="chkFormaAumentoSalCol"  />
                                            </h:selectOneRadio>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="25%" >
                                            <h:panelGrid columns="2" style="margin:0 0 0 -3px;padding:0;" >
                                                <h:outputLabel id="etiquetaValorSalCol" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.formaAumento eq 'V' ? 'Cantidad: ': 'Porcentaje: '}" style="font-weight: bold;" />
                                                <h:outputLabel value="*" styleClass="requerido"/>                                
                                            </h:panelGrid>
                                        </td>
                                        <td width="75%" colspan="4">
                                            <p:inputText value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.sueldoNuevo}" style="width: 80px;" />
                                            <h:outputLabel id="lblPorcentaje" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.formaAumento eq 'P' ? '  %  ' : ''}" style="font-weight: bold;" />
                                        </td>                    
                                    </tr>
                                    <tr>
                                        <td width="25%" ><i:etiquetaRequerido value="Fecha inicial" styleClass="requerido" /></td>
                                        <td width="75%" colspan="4" >
                                            <p:calendar value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.fechaInicial}" showOn="button" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><i:etiquetaRequerido value="Tipo Planilla" styleClass="requerido" /></td>
                                        <td colspan="4" >
                                            <h:selectOneMenu id="lstTipoPlanillaRangoSal" style="height: 25px;padding-top: 3px;width: 250px;" label="Tipo Planilla" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.tipoPlanilla}" >                       
                                                <f:ajax render="lstPlanillaRangoSal" event="change" execute="lstTipoPlanillaRangoSal" />
                                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE TIPO PLANILLA]" />
                                                <f:selectItems value="#{planilla$accionesPersonal.listaTipos}" var="tipo" itemValue="#{tipo.tiposPlanillaPK.codTipopla}" itemLabel="#{tipo.nomTipopla}"/>
                                            </h:selectOneMenu>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><i:etiquetaRequerido value="Planilla" styleClass="requerido" /></td>
                                        <td colspan="4" >
                                            <h:selectOneMenu id="lstPlanillaRangoSal" style="height: 25px;padding-top: 3px;width: 250px;" label="Planilla" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.planilla}" >
                                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE PLANILLA]" />
                                                <f:selectItems value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.listaPlanillas}" var="pla" 
                                                               itemValue="#{pla.pkAsString}" itemLabel="#{pla.anio} ------ #{pla.mes} ------ #{pla.numPlanilla}" />
                                            </h:selectOneMenu>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td></td>
                                        <td colspan="4" ><h:outputLabel value="A&Ntilde;O-MES-N&Uacute;MERO DE PLANILLA" style="font-weight: bold;color: red;" /></td>
                                    </tr>

                                    <tr>
                                        <td colspan="5" >
                                            <h:panelGrid columns="2">
                                                <h:outputLabel id="totalEmpleadosAfectadosSalCol"  value="Total de Empleados afectados: " />
                                                <h:outputLabel id="totalEmpleadosAfectadosSalColV"  value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.empleadosAfectados} " styleClass="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.empleadosAfectados lt 1 ? 'afectadosMinimo' : 'afectadosMaximo' }" />
                                            </h:panelGrid>
                                        </td>
                                    </tr>

                                </table>

                            </p:panel>   

                            <p:panel id="panelDepartamentos" style="border:none;" rendered="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.criterioSeleccionado eq 'departamentos' }" >

                                <table width="100%" >
                                    <tr>
                                        <td width="20%"><i:etiquetaRequerido value="Departamento" styleClass="requerido" /></td>
                                        <td width="80%">
                                            <h:selectOneMenu id="lstDeptosSolAumCol" style="height: 25px;padding-top: 3px;width: 250px;" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.departamento}" >
                                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE UN DEPARTAMENTO]" />
                                                <f:selectItems value="#{planilla$accionesPersonal.solicitudVacacionColectiva.listaDepartamentos}" var="departamento" itemValue="#{departamento.departamentosPK.codDepto}" itemLabel="#{departamento.nomDepto}" />
                                                <f:ajax event="change" execute="lstDeptosSolAumCol" listener="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.calcularAfectador}" render="totalEmpleadosAfectadosSalColDep totalEmpleadosAfectadosSalColVDep" />
                                            </h:selectOneMenu>   
                                        </td>

                                    </tr>

                                    <tr>
                                        <td width="25%" ><h:outputLabel value="Criterio" style="font-weight: bold;" /></td>
                                        <td width="75%" colspan="4" >
                                            <h:selectOneRadio id="chkFormaAumentoSalColDep" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.formaAumento}" >
                                                <f:selectItem itemValue="V" itemLabel="Aplicar valor" />
                                                <f:selectItem itemValue="P" itemLabel="Aplicar porcentaje" />
                                                <f:ajax event="change" render="etiquetaValorSalColDep lblPorcentajeDep" execute="chkFormaAumentoSalColDep"  />
                                            </h:selectOneRadio>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td width="25%" >
                                            <h:panelGrid columns="2" style="margin:0 0 0 -3px;padding:0;" >
                                                <h:outputLabel id="etiquetaValorSalColDep" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.formaAumento eq 'V' ? 'Cantidad: ': 'Porcentaje: '}" style="font-weight: bold;" />
                                                <h:outputLabel value="*" styleClass="requerido"/>                                
                                            </h:panelGrid>
                                        </td>
                                        <td width="75%" colspan="4">
                                            <p:inputText value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.sueldoNuevo}" style="width: 80px;" />
                                            <h:outputLabel id="lblPorcentajeDep" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.formaAumento eq 'P' ? '  %  ' : ''}" style="font-weight: bold;" />
                                        </td>                    
                                    </tr>
                                    <tr>
                                        <td width="25%" ><i:etiquetaRequerido value="Fecha inicial" styleClass="requerido" /></td>
                                        <td width="75%" colspan="4" >
                                            <p:calendar value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.fechaInicial}" showOn="button" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><i:etiquetaRequerido value="Tipo Planilla" styleClass="requerido" /></td>
                                        <td>
                                            <h:selectOneMenu id="lstTipoPlanillaSalColDep" style="height: 25px;padding-top: 3px;width: 250px;" label="Tipo Planilla" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.tipoPlanilla}" >                       
                                                <f:ajax render="lstPlanillaSalColDep" event="change" execute="lstTipoPlanillaSalColDep" />
                                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE TIPO PLANILLA]" />
                                                <f:selectItems value="#{planilla$accionesPersonal.listaTipos}" var="tipo" itemValue="#{tipo.tiposPlanillaPK.codTipopla}" itemLabel="#{tipo.nomTipopla}"/>
                                            </h:selectOneMenu>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><i:etiquetaRequerido value="Planilla" styleClass="requerido" /></td>
                                        <td>
                                            <h:selectOneMenu id="lstPlanillaSalColDep" style="height: 25px;padding-top: 3px;width: 250px;" label="Planilla" value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.planilla}" >
                                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE PLANILLA]" />
                                                <f:selectItems value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.listaPlanillas}" var="pla" 
                                                               itemValue="#{pla.pkAsString}" itemLabel="#{pla.anio} ------ #{pla.mes} ------ #{pla.numPlanilla}" />
                                            </h:selectOneMenu>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td><h:outputLabel value="A&Ntilde;O-MES-N&Uacute;MERO DE PLANILLA" style="font-weight: bold;color: red;" /></td>
                                    </tr>
                                    <tr>
                                        <td colspan="5" >
                                            <h:panelGrid columns="2">
                                                <h:outputLabel id="totalEmpleadosAfectadosSalColDep"  value="Total de Empleados afectados: " />
                                                <h:outputLabel id="totalEmpleadosAfectadosSalColVDep"  value="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.empleadosAfectados} " styleClass="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.empleadosAfectados lt 1 ? 'afectadosMinimo' : 'afectadosMaximo' }" />
                                            </h:panelGrid>
                                        </td>
                                    </tr>

                                </table>
                            </p:panel>   
                        </td>
                    </tr>
                </table>
            </p:fieldset>

            <p:spacer height="15" />
            <ap:okCancelAccionPersonal okAction="#{planilla$accionesPersonal.solicitudAumentoSueldoColectivo.guardarSolicitud$action}" update="principalForm:mensajes,principalForm:tableSolicitud,principalForm:fldAumentoSalarioCol,principalForm:txtobservacionesAuSalCol" cancelAction="#{planilla$accionesPersonal.cancelar$action}" onCancelClose="#{planilla$accionesPersonal.urlPlantilla}" />

        </p:dialog>

        <!-- Solicitud de Retiro  -->
        <d:dialogoEmpleados name="dlgEmpSolRetiro" selectionMode="single"
            title="Listado general de Empleados" selection="#{planilla$accionesPersonal.empleadoAccionPersonal}"
            update="principalForm:mensajes,principalForm:fieldsetEncabezadoRetiro" image="/resources/imagenes/64/meeting-participant.png"
            information="Seleccione un empleado para la solicitud"
            okAction="#{planilla$accionesPersonal.seleccionarEmpleado}"
            cancelAction="#{planilla$accionesPersonal.cancelSeleccionarEmpleado}"/> 
                
        <p:dialog id="dialogSolicitudRetiro" widgetVar="dialogSolicitudRetiro" header="#{planilla$accionesPersonal.accionSeleccionada != null ? planilla$accionesPersonal.accionSeleccionada.nomTipoaccion : 'Ninguna Acción Seleccionada'}" showEffect="fold" hideEffect="fold" width="770" height="550" >
            <p:spacer height="10px"/>
            <i:panelInformacion imagen="../../resources/imagenes/64/info.png" />
            <p:spacer height="10px"/>

            <p:fieldset id="fieldsetEncabezadoRetiro">
                <ap:encabezadoSolicitud dialogoEmpleados="dlgEmpSolRetiro" />
                <table border="0" width="100%" cellpadding="3" >
                    <tr>
                        <td width="20%;"><h:outputLabel value="Observaci&oacute;n" style="font-weight: bold;" /></td>
                        <td colspan="3" width="80%;" ><p:inputTextarea id="txtobservacionesRetiro" style="width:100%;" value="#{planilla$accionesPersonal.solicitudRetiro.observacion}" autoResize="false" /></td>
                    </tr>
                </table>
            </p:fieldset>

            <p:spacer height="10px"/>

            <p:fieldset id="fldRetiro" >

                <table border="0"  >
                    <tr>
                        <td><i:etiquetaRequerido value="Fecha Retiro" styleClass="requerido" /></td>
                        <td>                            
                            <p:calendar id="fecRetiro" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudRetiro.fechaRetiro}"  />
                        </td>
                    </tr>

                    <tr>
                        <td><i:etiquetaRequerido value="Tipo Accion" styleClass="requerido" /></td>
                        <td>                            
                            <h:selectOneMenu id="lstTipoAccionRenuncia" value="#{planilla$accionesPersonal.solicitudRetiro.accion}" style="height: 25px;padding-top: 3px;width: 250px;" >
                                <f:selectItem itemValue="-1" itemLabel="[ SELECCIONE UN TIPO ACCION ]" />
                                <f:selectItems value="#{planilla$accionesPersonal.solicitudRetiro.listaTipoAccion}" var="accion" itemLabel="#{accion.nomTipoaccion}" itemValue="#{accion.tipoAccionPK.codTipoaccion}" />
                            </h:selectOneMenu>
                        </td>
                    </tr>

                    <tr>
                        <td><i:etiquetaRequerido value="Motivo" styleClass="requerido" /></td>
                        <td>                            
                            <h:selectOneMenu id="lstMotivoRenuncia" value="#{planilla$accionesPersonal.solicitudRetiro.tipoRenuncia}" style="height: 25px;padding-top: 3px;width: 250px;" >
                                <f:selectItem itemValue="-1" itemLabel="[ SELECCIONE UN MOTIVO ]" />
                                <f:selectItems value="#{planilla$accionesPersonal.solicitudRetiro.listaCausasRenuncia}" var="motivo" itemLabel="#{motivo.descripcion}" itemValue="#{motivo.causasRenunciaPK.codTiporenuncia}" />
                            </h:selectOneMenu>
                        </td>
                    </tr>

                    <tr>
                        <td><i:etiquetaRequerido value="Tipo Planilla" styleClass="requerido" /></td>
                        <td>                            
                            <h:selectOneMenu id="lstTipoPlanillaRetiro" style="height: 25px;padding-top: 3px;width: 250px;" label="Tipo Planilla" value="#{planilla$accionesPersonal.solicitudRetiro.tipoPlanilla}" >                       
                                <f:selectItem itemValue="-1" itemLabel="[SELECCIONE TIPO PLANILLA]" />
                                <f:selectItems value="#{planilla$accionesPersonal.listaTipos}" var="tipo" itemValue="#{tipo.tiposPlanillaPK.codTipopla}" itemLabel="#{tipo.nomTipopla}"/>
                            </h:selectOneMenu>
                        </td>
                    </tr>

                </table>

            </p:fieldset>
            <p:spacer height="15" />
            <ap:okCancelAccionPersonal okAction="#{planilla$accionesPersonal.solicitudRetiro.guardarSolicitud$action}" update="principalForm:mensajes,principalForm:tableSolicitud,principalForm:fldRetiro,principalForm:txtobservacionesRetiro" cancelAction="#{planilla$accionesPersonal.cancelar$action}" onCancelClose="#{planilla$accionesPersonal.urlPlantilla}" />
        </p:dialog>

        <!-- Solicitud No Afecta Planilla -->
        <d:dialogoEmpleados name="dlgEmpSolNoAfecta" selectionMode="single"
            title="Listado general de Empleados" selection="#{planilla$accionesPersonal.empleadoAccionPersonal}"
            update="principalForm:mensajes,principalForm:fieldsetEncabezadoNA" image="/resources/imagenes/64/meeting-participant.png"
            information="Seleccione un empleado para la solicitud"
            okAction="#{planilla$accionesPersonal.seleccionarEmpleado}"
            cancelAction="#{planilla$accionesPersonal.cancelSeleccionarEmpleado}"/> 
        
        <p:dialog id="dialogSolicitudNA" widgetVar="dialogSolicitudNA" header="#{planilla$accionesPersonal.accionSeleccionada != null ? planilla$accionesPersonal.accionSeleccionada.nomTipoaccion : 'Ninguna Acción Seleccionada'}" showEffect="fold" hideEffect="fold" width="770" height="550" >
            <p:spacer height="10px"/>
            <i:panelInformacion imagen="../../resources/imagenes/64/info.png" />
            <p:spacer height="10px"/>

            <p:fieldset id="fieldsetEncabezadoNA">
                <ap:encabezadoSolicitud dialogoEmpleados="dlgEmpSolNoAfecta" />
                <table border="0" width="100%" cellpadding="3" >
                    <tr>
                        <td width="20%;"><h:outputLabel value="Observaci&oacute;n" style="font-weight: bold;" /></td>
                        <td colspan="3" width="80%;" ><p:inputTextarea id="txtobservacionesNA" style="width:100%;" value="#{planilla$accionesPersonal.solicitudNoAfectaPlanilla.observacion}" autoResize="false" /></td>
                    </tr>
                </table>
            </p:fieldset>

            <p:spacer height="10px"/>

            <p:fieldset id="fldNoAfectaPlanilla" >

                <table border="0"  >
                    <tr>
                        <td><i:etiquetaRequerido value="Tipo de Acci&oacute;n" styleClass="requerido" /></td>
                        <td>                            
                            <h:selectOneMenu style="height: 25px;padding-top: 3px;width: 250px;" value="#{planilla$accionesPersonal.solicitudNoAfectaPlanilla.tipoAccionSeleccionada}" >
                                <f:selectItem itemValue="-1" itemLabel="[ SELECCIONE UN TIPO DE ACCI&Oacute;N ]" />
                                <f:selectItems value="#{planilla$accionesPersonal.solicitudNoAfectaPlanilla.listaTipoAccionNoAfecta}" var="tipoAccion" itemValue="#{tipoAccion.tipoAccionPK.codTipoaccion}" itemLabel="#{tipoAccion.nomTipoaccion}" />
                            </h:selectOneMenu>
                        </td>        
                    </tr>

                    <tr>
                        <td>
                            <h:panelGrid columns="2" style="margin:0 0 0 -3px;padding:0;" >
                                <h:outputLabel value="Fecha inicial"/>                      
                            </h:panelGrid>
                        </td>

                        <td>                            
                            <p:calendar id="fecInicialNA" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudNoAfectaPlanilla.fechaInicial}"  />
                        </td>

                        <td>
                            <h:panelGrid columns="2" style="margin:0 0 0 -3px;padding:0;" >
                                <h:outputLabel value="Fecha Final"/>
                            </h:panelGrid>
                        </td>

                        <td>                            
                            <p:calendar id="fecFinalNA" showOn="button" pattern="dd/MM/yyyy" value="#{planilla$accionesPersonal.solicitudNoAfectaPlanilla.fechaFinal}"  />
                        </td>
                    </tr>
                </table>

            </p:fieldset>
            <p:spacer height="15" />
            <ap:okCancelAccionPersonal okAction="#{planilla$accionesPersonal.solicitudNoAfectaPlanilla.guardarSolicitud$action}" update="principalForm:mensajes,principalForm:tableSolicitud,principalForm:fldNoAfectaPlanilla,principalForm:txtobservacionesNA" cancelAction="#{planilla$accionesPersonal.cancelar$action}" onCancelClose="#{planilla$accionesPersonal.urlPlantilla}" />
        </p:dialog>

    </ui:define>

</ui:composition>