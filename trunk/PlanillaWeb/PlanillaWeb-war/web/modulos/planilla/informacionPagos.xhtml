<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    template="/plantillas/defaultTemplate.xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"                
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.prime.com.tr/ui"
    xmlns:f="http://java.sun.com/jsf/core">
    <!-- ================================================================================================================ -->
    <ui:define name="titulo">
        <h:outputText value="Informaci&oacute;n de Pagos"/>
    </ui:define>
    <!-- ================================================================================================================ -->
    <ui:define name="acciones">
        <p:tab title="Evaluaci&oacute;n">
            <h:panelGrid columns="1" width="100%" border="0" cellpadding="0" cellspacing="0">
                <p:commandLink styleClass="opcionMenu" action="#{planilla$informacionPagos.buscarPlanilla$action}" update="principalForm:mensajes, principalForm:tablaDetalle" onmouseover="this.className='opcionMenu textonegrita';" onmouseout="this.className='opcionMenu textonormal';">
                    <p:graphicImage value="/resources/iconos/meeting-participant-request-response.png"/>
                    <h:outputText value="Mostrar datos de planilla" styleClass="espacioTexto"/>
                </p:commandLink>
            </h:panelGrid>
        </p:tab>
        <p:tab title="Otras acciones">
            <h:panelGrid columns="1">
                <p:commandLink styleClass="opcionMenu textoNormal" ajax="true" action="#{planilla$informacionPagos.inicio$action}" update="principalForm:mensajes" onmouseover="this.className='opcionMenu textonegrita';" onmouseout="this.className='opcionMenu textonormal';">
                    <p:graphicImage value="/resources/iconos/application-exit.png"/>
                    <h:outputText value="Cancelar" styleClass="espacioTexto"/>
                </p:commandLink>
            </h:panelGrid>
        </p:tab>
    </ui:define>
    <!-- ================================================================================================================ -->
    <ui:define name="contenido">
        <p:fieldset id="fieldset2" legend="Planilla">            
            <p:dataTable value="#{planilla$informacionPagos.listaPlanillas}" var="planilla" 
                         selectionMode="single" selection="#{planilla$informacionPagos.planillaSeleccionada}" 
                         rowSelectListener="#{planilla$informacionPagos.onRowSelectPlanilla}"  
                         rows="3" paginator="true" paginatorAlwaysVisible="true" update="tbIng tbEgr" 
                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="3,5,10,25">
                <p:column>
                    <p:rowToggler/>
                </p:column>
                <p:column headerText="Planilla" filterBy="#{planilla.planillaPK.anio}-#{planilla.planillaPK.mes}-#{planilla.planillaPK.numPlanilla}" filterMatchMode="contains" >
                    <p:graphicImage url="/resources/iconos/view-calendar-journal.png" height="16" width="16"/>
                    <p:spacer width="5"/>
                    <h:outputText value="Planilla #{planilla.planillaPK.anio}-#{planilla.planillaPK.mes}-#{planilla.planillaPK.numPlanilla}"/>
                </p:column>
                <p:column headerText="Tipo de planilla" sortBy="#{planilla.resumenAsistencia.tiposPlanilla.nomTipopla}" filterBy="#{planilla.resumenAsistencia.tiposPlanilla.nomTipopla}" filterMatchMode="contains">
                    <p:graphicImage url="/resources/iconos/documentinfo.png" height="16" width="16"/>
                    <p:spacer width="5"/>
                    <h:outputText value="#{planilla.resumenAsistencia.tiposPlanilla.nomTipopla}"/>
                </p:column>
                <p:rowExpansion>
                    <table width="100%" border="0">
                        <tr valign="top">
                            <td width="50%">
                                <p:dataTable emptyMessage="No se han encontrado egresos" value="planilla" var="egreso">
                                    <f:facet name="header">
                                        <h:outputText value="Detalle"/>
                                    </f:facet>
                                        <p:column headerText="Empleado" filterMatchMode="contains" >
                                            <p:spacer width="5"/>
                                            <h:outputText value="#{planilla.empleados.nombreCompleto}"/>
                                        </p:column>
                                        <p:column headerText="Sueldo Base" filterMatchMode="contains" >
                                            <p:spacer width="5"/>
                                            <h:outputText value="#{planilla.empleados.puestos.salMinimo}"/>
                                        </p:column>
                                        <p:column headerText="Prestaciones" filterMatchMode="contains" >
                                            <p:spacer width="5"/>
                                            <h:outputText value="#{planilla.prestaciones}"/>
                                        </p:column>
                                        <p:column headerText="Deducciones" filterMatchMode="contains" >
                                            <p:spacer width="5"/>
                                            <h:outputText value="#{planilla.deducciones}"/>
                                        </p:column>
                                        <p:column headerText="Total" filterMatchMode="contains" >
                                            <p:spacer width="5"/>
                                            <h:outputText value="#{planilla.total}"/>
                                        </p:column>
                                </p:dataTable>
                            </td>
                        </tr>
                    </table>
                    
                </p:rowExpansion>
            </p:dataTable>
            <p:spacer height="10"/>
            <table width="100%" border="0">
                <tr valign="top">
                    <td width="50%">
                        <p:dataTable emptyMessage="No se han encontrado ingresos" value="#{planilla$informacionPagos.listaPrestaciones}" var="ingreso" id="tbIng">
                            <f:facet name="header">
                                <h:outputText value="Ingresos"/>
                            </f:facet>
                            <p:column headerText="Descripcion">
                                <h:outputText value="#{ingreso.deducPresta.desDp}"/>
                            </p:column>
                            <p:column headerText="Cantidad">
                                <h:outputText value="#{ingreso.valor}"/>
                            </p:column>
                         </p:dataTable>
                     </td>
                     <td width="50%">
                         <p:dataTable emptyMessage="No se han encontrado egresos" value="#{planilla$informacionPagos.listaDeducciones}" var="egreso" id="tbEgr">
                            <f:facet name="header">
                                <h:outputText value="Egresos"/>
                            </f:facet>
                            <p:column headerText="Descripcion">
                                <h:outputText value="#{egreso.deducPresta.desDp}"/>
                            </p:column>
                            <p:column headerText="Cantidad">
                                <h:outputText value="#{egreso.valor}"/>
                            </p:column>
                        </p:dataTable>
                      </td>
                </tr>
            </table>
            
        </p:fieldset>
    </ui:define>
    <!-- ================================================================================================================ -->
</ui:composition>