<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/plantillas/defaultTemplate.xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.prime.com.tr/ui"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="titulo">Preseleccion de candidatos</ui:define>

    <ui:define name="acciones"/>

    <ui:define name="contenido">
        <h:form id="preseleccionAspiranteForm" prependId="true">
            <p:fieldset legend="Concursos" >
                <p:growl id="mensajes" showDetail="true" />

                <h:outputText value="Seleccione la fecha inicial y final para iniciar la bÃºsqueda de concursos."/>

                <h:panelGrid columns="4">
                    <h:outputLabel value=""/>
                    <h:outputLabel value="Fecha inicial"/>
                    <p:calendar id="calFechaInicial" 
                                pattern="dd/MM/yyyy" 
                                value="#{reclutamiento$preseleccionAspirante.fechaInicial}" 
                                showOn="button"/>
                    <p:commandButton value="Buscar" 
                                     image="buscar" 
                                     update="mensajes calFechaInicial calFechaFinal tablaConcursos" 
                                     action="#{reclutamiento$preseleccionAspirante.buscarConcurso$action()}"/>
                    <h:outputLabel value=""/>
                    <h:outputLabel value="Fecha final"/>
                    <p:calendar id="calFechaFinal" 
                                pattern="dd/MM/yyyy" 
                                value="#{reclutamiento$preseleccionAspirante.fechaFinal}" 
                                showOn="button" />
                </h:panelGrid>

                <p:dataTable id="tablaConcursos"
                             var="concurso" 
                             value="#{reclutamiento$preseleccionAspirante.listaConcurso}"
                             rows="5" 
                             paginator="true" 
                             paginatorAlwaysVisible="true" 
                             selection="#{SessionBeanREC.concursoSeleccionado}"
                             update="tablaConcursos pane1Candidatos" 
                             selectionMode="single"
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100" >
                    <f:facet name="header">
                        <h:outputText value="Concursos"/>
                    </f:facet>

                    <p:column sortBy="#{concurso.concursoPK.codConcurso}">
                        <f:facet name="header">
                            C&oacute;digo
                        </f:facet>
                        <h:outputLabel value="#{concurso.concursoPK.codConcurso}"/>
                    </p:column>

                    <p:column sortBy="#{concurso.nombre}" >
                        <f:facet name="header">
                            Nombre del concurso
                        </f:facet>
                        <h:outputLabel value="#{concurso.nombre}"/>
                    </p:column> 

                    <p:column sortBy="#{concurso.fechaInicial}">
                        <f:facet name="header">
                            Fecha inicial
                        </f:facet>
                        <h:outputLabel value="#{concurso.fechaInicial}" >
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </h:outputLabel>
                    </p:column>    

                    <p:column sortBy="#{concurso.fechaFinal}">
                        <f:facet name="header">
                            Fecha final
                        </f:facet>
                        <h:outputLabel value="#{concurso.fechaFinal}" >
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </h:outputLabel>
                    </p:column>         
                </p:dataTable>
            </p:fieldset>
            
            <p:spacer height="20px" />
            
            <p:fieldset id="pane1Candidatos" style="border: none;">
                    <p:dataTable id="tablaCandidatos"
                                 var="candidato" 
                                 value="#{reclutamiento$preseleccionAspirante.listaCandidato}"
                                 rows="5" 
                                 paginator="true" 
                                 paginatorAlwaysVisible="true" 
                                 update="tablaConcursos, tablaCandidatos" 
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100" 
                                 rendered="#{SessionBeanREC.concursoSeleccionado ne null}" >

                        <f:facet name="header">
                            <h:outputText value="Candidatos"/>
                        </f:facet>

                        <p:column sortBy="#{candidato.candidatoPK.codCandidato}">
                            <f:facet name="header">
                                C&oacute;digo
                            </f:facet>
                            <h:outputLabel value="#{candidato.candidatoPK.codCandidato}"/>
                        </p:column>

                        <p:column sortBy="#{candidato.nombre}" >
                            <f:facet name="header">
                                Nombre
                            </f:facet>
                            <h:outputLabel value="#{candidato.nombre}"/>
                        </p:column> 
                    </p:dataTable>
                </p:fieldset>
        </h:form>

    </ui:define>

</ui:composition>