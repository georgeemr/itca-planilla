<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/plantillas/defaultTemplate.xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.prime.com.tr/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <ui:define name="titulo">Reclutamiento y Selecci&oacute;n de Candidatos</ui:define>

    <ui:define name="dialogos" >

        <p:dialog id="dialogoEvaluacion" widgetVar="botonMostrarEvaluacion" header="Evaluaciones" width="650" height="300"  
                  onCloseUpdate="principalForm:mensajes,principalForm:evCandidatoLst" closeListener="#{reclutamiento$preseleccionAspirante.handleCloseEvaluacionCandidato}"
                  resizable="false" showEffect="clip" hideEffect="clip">  
            <h:outputLabel id="lbl1" value="Candidato Seleccionado: "  style="font-weight: bold;"/>
            <h:outputLabel id="lbl2" value="#{reclutamiento$preseleccionAspirante.candidatoSeleccionado.candidato1.nombreCompleto}" />
            <p:spacer height="30">
                <p:dataTable id="pruebasXEvaluacionEdit" value="#{reclutamiento$preseleccionAspirante.evaluacionCandidatos}" 
                             paginator="true" rows="10"  emptyMessage="No se han encontrado Evaluaciones." 
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                             rowsPerPageTemplate="5,10,25,50,100" style="margin-top: 20px;" onRowEditUpdate="principalForm:mensajes" onRowSelectUpdate="principalForm:mensajes"
                             var="evaluacion" dynamic="true" rowEditListener="#{reclutamiento$preseleccionAspirante.onEditNotasCandidato}" >

                    <p:column headerText="Evaluaci&oacute;n" >  
                        <h:outputLabel value="#{evaluacion.pruebaXPuesto.nombre}" />
                    </p:column>  

                    <p:column headerText="Nota" style="width:250px; text-align: left">  
                        <p:cellEditor  >  
                            <f:facet name="output">  
                                <h:outputText value="#{evaluacion.nota}" >  
                                    <f:convertNumber maxFractionDigits="2" />
                                </h:outputText>
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputText value="#{evaluacion.nota}" validatorMessage="Debe ingresar un valor entre 0 y 10." maxlength="2" style="width:100%">  
                                    <f:validateDoubleRange minimum="0" maximum="10"  />
                                </p:inputText>
                            </f:facet>  
                        </p:cellEditor>  
                    </p:column>  

                    <p:column headerText="Observaci&oacute;n" style="width:250px; text-align: left">  
                        <p:cellEditor  >  
                            <f:facet name="output">  
                                <h:outputText value="#{evaluacion.observacion}" />  
                            </f:facet>  
                            <f:facet name="input">  
                                <p:inputTextarea value="#{evaluacion.observacion}" style="width:100%"/>  
                            </f:facet>  
                        </p:cellEditor>  
                    </p:column> 

                    <p:column headerText="Ingresar" style="width:50px; text-align: left;">  
                        <p:rowEditor />  
                    </p:column>  

                </p:dataTable>
            </p:spacer>

        </p:dialog>    

        <p:dialog id="dialogoCriterio" widgetVar="botonMostrarCriterios" header="Seleccionar Criterio" width="425" height="300"  
                  onCloseUpdate="principalForm:criteriosSeleccionados,principalForm:mensajes" resizable="false" showEffect="clip" hideEffect="clip"
                  closeListener="#{reclutamiento$preseleccionAspirante.handleCloseCriterioAdicional}" >

            <p:fieldset legend="Criterios diponibles">

                <p:dataTable id="criteriosDisponibles" var="criterio" value="#{reclutamiento$preseleccionAspirante.criteriosDisponibles}" emptyMessage="No se han encontrado mas Criterios" 
                             paginator="true" rows="10" selectionMode="multiple" onRowSelectUpdate="principalForm:criteriosDisponibles,principalForm:criteriosSeleccionados"
                             selection="#{SessionBeanREC.criteriosAdicionales}" binding="#{reclutamiento$preseleccionAspirante.tableCriteriosAdicionales}"
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                             rowsPerPageTemplate="5,10,25,50,100" >  

                    <p:column headerText="Criterio" 
                              filterBy="#{criterio.criterio1.nombre}"
                              filterMatchMode="contains" >  
                        <h:outputLabel value="#{criterio.criterio1.nombre}" />  
                        <h:outputLabel value="#{criterio.descripcionRango}" />
                    </p:column>  

                </p:dataTable>  

            </p:fieldset>

        </p:dialog> 

        <p:confirmDialog message="&#191;Esta seguro que desea cerrar este Concurso?"  
                         showEffect="bounce" hideEffect="explode"  modal="true" closable="false"
                         header="Cerrar Concurso" severity="alert" widgetVar="confirmation">  
            <h:panelGrid columns="2">
                <h:outputLabel value="Comentario final: " />
                <p:inputTextarea value="#{reclutamiento$preseleccionAspirante.comentarioFinal}" />
            </h:panelGrid>
            <p:commandButton id="cmdOk" value="Si, estoy seguro" update="principalForm:mensajes,principalForm:cmdCerrar,principalForm:cmdOk" 
                             action="#{reclutamiento$preseleccionAspirante.iniciar}" onclick="confirmation.hide()" />   
            <p:commandButton value="No" onclick="confirmation.hide()" type="button" />   

        </p:confirmDialog>  

        <p:dialog id="dialogoContrato" widgetVar="botonMostrarContrato" header="Datos de Contrataci&oacute;n" width="820" height="470"  
                  onCloseUpdate="principalForm:mensajes,principalForm:candidatoContratar,principalForm:mensajesContrato" 
                  resizable="false" showEffect="clip" hideEffect="clip">  
            <p:spacer height="20" />

            <p:fieldset legend="Contrato de Empleado" >

                <table border="0" >
                    <tr align="right">
                        <td colspan="5" align="right">
                            <h:panelGrid columns="3">
                                <h:outputLabel value="Campos marcardos con " style="font-style: italic;" />
                                <h:outputLabel value="*" styleClass="requerido"/>                                
                                <h:outputLabel value=" son requeridos" style="font-style: italic;" />
                            </h:panelGrid>
                            <p:messages id="mensajesContrato" showDetail="true" showSummary="true"/>  
                        </td>
                    </tr>
                    <tr>
                        <td><h:outputLabel value="Empresa" style="font-weight: bold;" /></td>
                        <td colspan="3"><h:outputLabel value="#{SessionBeanADM.compania.nomComercial}" /></td>
                    </tr>
                    <tr>
                        <td><h:outputLabel value="Candidato" style="font-weight: bold;" /></td>
                        <td colspan="3" ><h:outputLabel id="lbl_candidato" value="#{reclutamiento$preseleccionAspirante.candidatoSeleccionado.candidato1.nombreCompleto}" /></td>
                    </tr>
                    <tr>
                        <td> 
                            <h:panelGrid columns="2">
                                <h:outputLabel value="Acta y Acuerdo" style="font-weight: bold;"/>
                                <h:outputLabel value="*" styleClass="requerido"/>                                
                            </h:panelGrid>
                        </td>
                        <td><p:inputText id="txAreaOAcuerdo" value="#{reclutamiento$preseleccionAspirante.actaOAcuerdo}"/></td>
                        <td></td>
                        <td>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="Fecha de Acuerdo" style="font-weight: bold;"/>
                                <h:outputLabel value="*" styleClass="requerido"/>                                
                            </h:panelGrid>
                        </td>
                        <td><p:calendar  value="#{reclutamiento$preseleccionAspirante.dia}" pattern="dd/MM/yyyy" showOn="button" /></td>
                    </tr>
                    <tr>
                        <td>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="Fecha Inicio" style="font-weight: bold;"/>
                                <h:outputLabel value="*" styleClass="requerido"/>                                
                            </h:panelGrid>
                        </td>
                        <td><p:calendar id="calFecInicialCon" pattern="dd/MM/yyyy" showOn="button" value="#{reclutamiento$preseleccionAspirante.fechaInicio}" /></td>
                        <td></td>
                        <td><h:outputLabel value="Fecha Fin" /></td>
                        <td><p:calendar id="calFecFinalCon" pattern="dd/MM/yyyy" showOn="button" value="#{reclutamiento$preseleccionAspirante.fechaFin}"/></td>
                    </tr>
                    <tr>
                        <td><h:outputLabel value="Puesto" style="font-weight: bold;"/></td>
                        <td><h:outputLabel id="lbl_puesto" value="#{reclutamiento$preseleccionAspirante.candidatoSeleccionado.concurso1.puesto.nombre}" /></td>
                        <td></td>
                        <td>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="Salario $" style="font-weight: bold;"/>
                                <h:outputLabel value="*" styleClass="requerido"/>                                
                            </h:panelGrid>
                        </td>
                        <td><p:inputText id="txSalarioCan" value="#{reclutamiento$preseleccionAspirante.salario}" >
                                <f:convertNumber maxFractionDigits="2" />
                            </p:inputText></td>
                    </tr>
                    <tr>
                        <td>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="Representante Patronal" style="font-weight: bold;" />                          
                                <h:outputLabel value="*" styleClass="requerido"/>                                
                            </h:panelGrid>
                        </td>
                        <td colspan="3" ><p:inputText id="txtRepresentanteP" value="#{reclutamiento$preseleccionAspirante.representantePatronal}" /></td>
                    </tr>
                    <tr>
                        <td>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="Tipo de Contrato" style="font-weight: bold;" />
                                <h:outputLabel value="*" styleClass="requerido"/>                                
                            </h:panelGrid>
                        </td>
                        <td><h:selectOneMenu id="lst_tipoContrato" value="#{reclutamiento$preseleccionAspirante.tipoContratoSeleccionado}" >
                                <f:selectItem itemValue="" itemLabel="" />
                            </h:selectOneMenu></td>
                        <td></td>
                        <td>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="Estado del Contrato" style="font-weight: bold;" />
                                <h:outputLabel value="*" styleClass="requerido"/>                                
                            </h:panelGrid>
                        </td>
                        <td><h:selectOneMenu id="lst_estadoContrato" value="#{reclutamiento$preseleccionAspirante.estadoContrato}" >
                                <f:selectItem itemValue="" itemLabel="" />
                            </h:selectOneMenu></td>
                    </tr>
                    <tr>
                        <td>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="Tipo de Planilla" style="font-weight: bold;" />
                                <h:outputLabel value="*" styleClass="requerido"/>                                
                            </h:panelGrid>
                        </td>
                        <td><h:selectOneMenu id="lst_tipoPlanilla" value="#{reclutamiento$preseleccionAspirante.tipoPlanilla}" >
                                <f:selectItems var="tipoPlanilla" value="#{reclutamiento$preseleccionAspirante.listaTipoPlanilla}" itemValue="#{tipoPlanilla.tiposPlanillaPK.codTipopla}" itemLabel="#{tipoPlanilla.nomTipopla}" />
                            </h:selectOneMenu></td>
                        <td></td>
                        <td>
                            <h:panelGrid columns="2">
                                <h:outputLabel value="Sucursal" style="font-weight: bold;" />
                                <h:outputLabel value="*" styleClass="requerido"/>                                
                            </h:panelGrid>                            
                        </td>
                        <td><h:selectOneMenu id="lst_sucursal" value="#{reclutamiento$preseleccionAspirante.agencia}" >
                                <f:selectItems var="agencia" value="#{reclutamiento$preseleccionAspirante.listaAgencias}" itemValue="#{agencia.agenciasPK.codAgencia}" itemLabel="#{agencia.nomAgencia}" />
                            </h:selectOneMenu></td>
                    </tr>
                    <tr>
                        <td valign="top"><h:outputLabel value="Observaciones" style="font-weight: bold;" /></td>
                        <td colspan="3" ><p:inputTextarea id="txObservaciones" value="#{reclutamiento$preseleccionAspirante.observaciones}" /></td>
                    </tr>
                    <tr>
                        <td valign="top">
                            <h:panelGrid columns="2">
                                <h:outputLabel value="Usuario" style="font-weight: bold;" />
                                <h:outputLabel value="*" styleClass="requerido"/>                                
                            </h:panelGrid>
                        </td>
                        <td colspan="3" ><p:inputText id="txtUsuario" value="#{reclutamiento$preseleccionAspirante.usuario}" /></td>
                    </tr>
                </table>

                <h:panelGrid columns="2">
                    <f:facet name="footer" >
                        <h:panelGrid columns="2">
                            <p:commandButton value="Contratar" image="ui-icon-circle-check" action="#{reclutamiento$preseleccionAspirante.contratarCandidato}" update="principalForm:mensajesContrato,principalForm:txObservaciones,principalForm:txAreaOAcuerdo,principalForm:calFecFinalCon,principalForm:calFecInicialCon,principalForm:txSalarioCan,principalForm:txtRepresentanteP,principalForm:lst_tipoContrato,principalForm:lst_estadoContrato,principalForm:lst_sucursal,principalForm:lst_tipoPlanilla" />
                            <p:commandButton value="Cancelar"  image="ui-icon-circle-close" onclick="botonMostrarContrato.hide()" update="principalForm:mensajesContrato,principalForm:txObservaciones,principalForm:txAreaOAcuerdo,principalForm:calFecFinalCon,principalForm:calFecInicialCon,principalForm:txSalarioCan,principalForm:txtRepresentanteP,principalForm:lst_tipoContrato,principalForm:lst_estadoContrato,principalForm:lst_sucursal,principalForm:lst_tipoPlanilla" />
                        </h:panelGrid>
                    </f:facet>
                </h:panelGrid>
            </p:fieldset>    

        </p:dialog> 

    </ui:define>

    <ui:define name="acciones">
        <p:tab title="Otras acciones">
            <h:panelGrid columns="1">
                <p:commandLink styleClass="opcionMenu textoNormal" value="Cancelar" ajax="true" action="#{reclutamiento$preseleccionAspirante.inicio$action}" update="principalForm:mensajes" onmouseover="this.className='opcionMenu  textonegrita';" onmouseout="this.className='opcionMenu  textonormal';" immediate="true">
                    <p:graphicImage styleClass="ui-icon ui-icon-circle-close" />
                </p:commandLink>
            </h:panelGrid>
        </p:tab>
    </ui:define>

    <ui:define name="contenido">    
        <p:spacer height="20" />

        <p:wizard id="wizarPreseleccion" widgetVar="wiz" flowListener="#{reclutamiento$preseleccionAspirante.onFlowListener}" 
                  backLabel="Anterior" nextLabel="Siguiente"  >
            <p:tab id="concursoSeleccionado" title="Concursos"  >
                <p:spacer height="20" />
                <p:panel header="Paso 1 de 5" >
                    <h:panelGrid columns="8"  >
                        <h:outputLabel value=""/>
                        <h:outputLabel value="Fecha inicial"/>
                        <p:calendar id="calFechaInicial"  pattern="dd/MM/yyyy" showOn="button"
                                    value="#{reclutamiento$preseleccionAspirante.fechaInicial}" />
                        <h:outputLabel value=""/>
                        <h:outputLabel value="Fecha final"/>
                        <p:calendar id="calFechaFinal" 
                                    pattern="dd/MM/yyyy" 
                                    value="#{reclutamiento$preseleccionAspirante.fechaFinal}" 
                                    showOn="button" />
                        <p:commandButton value="Buscar" image="buscar" 
                                         update="mensajes, calFechaInicial, calFechaFinal, tablaConcursos, principalForm:criteriosDisponibles" 
                                         action="#{reclutamiento$preseleccionAspirante.buscarConcurso$action()}"/>
                    </h:panelGrid>
                    <p:spacer width="20" />
                    <p:dataTable id="tablaConcursos"
                                 var="concurso" 
                                 value="#{reclutamiento$preseleccionAspirante.listaConcurso}"
                                 rows="5" 
                                 paginator="true" 
                                 emptyMessage="No se han encontrado concursos."
                                 binding="#{reclutamiento$preseleccionAspirante.tableConcursos}"
                                 paginatorAlwaysVisible="true" 
                                 selectionMode="single"
                                 rowSelectListener="#{reclutamiento$preseleccionAspirante.onRowSelectConcurso}"
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100" >
                        <f:facet name="header">
                            <h:outputText value="Concursos"/>
                        </f:facet>

                        <p:column sortBy="#{concurso.concursoPK.codConcurso}">
                            <f:facet name="header">
                                C&oacute;digo
                            </f:facet>
                            <h:outputLabel value="#{concurso.concursoPK.codConcurso}"/>
                        </p:column>

                        <p:column filterBy="#{concurso.nombre}" 
                                  filterMatchMode="contains"
                                  headerText="Nombre del concurso">
                            <h:outputLabel value="#{concurso.nombre}"/>
                        </p:column> 

                        <p:column sortBy="#{concurso.fechaInicial}">
                            <f:facet name="header">
                                Fecha inicial
                            </f:facet>
                            <h:outputLabel value="#{concurso.fechaInicial}" >
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                            </h:outputLabel>
                        </p:column>    

                        <p:column sortBy="#{concurso.fechaFinal}">
                            <f:facet name="header">
                                Fecha final
                            </f:facet>
                            <h:outputLabel value="#{concurso.fechaFinal}" >
                                <f:convertDateTime pattern="dd/MM/yyyy" />
                            </h:outputLabel>
                        </p:column>         

                        <p:column sortBy="#{concurso.numeroPlazas}">
                            <f:facet name="header">
                                N&uacute;mero de plazas
                            </f:facet>
                            <h:outputLabel value="#{concurso.numeroPlazas}" />
                        </p:column> 

                        <p:column sortBy="#{concurso.puestos.nomPuesto}"
                                  filterBy="#{concurso.puestos.nomPuesto}"
                                  filterMatchMode="contains">
                            <f:facet name="header">
                                Puesto
                            </f:facet>
                            <h:outputLabel value="#{concurso.puestos.nomPuesto}" />
                        </p:column> 
                    </p:dataTable>
                    <p:spacer height="20" />
                </p:panel>
                <p:spacer height="20" />
            </p:tab>

            <p:tab id="candidatosSeleccionadosTab" title="Preselecci&oacute;n"  >

                <p:spacer height="20" />
                <p:panel id="panelProceso" header="Paso 2 de 5" >
                    <h:panelGrid columns="8" >
                        <h:outputLabel value="Concurso Seleccionado: " style="font-weight: bold;" />
                        <h:outputLabel value="${SessionBeanREC.concursoSeleccionado.nombre}" />
                        <h:outputLabel value=""/>
                        <h:outputLabel value="Puesto al que aplica: " style="font-weight: bold;" />
                        <h:outputLabel value="${SessionBeanREC.concursoSeleccionado.puestos.nomPuesto}" />
                        <h:outputLabel value=""/>
                        <h:outputLabel value="Plazas necesarias: " style="font-weight: bold;" />
                        <h:outputLabel value="${SessionBeanREC.concursoSeleccionado.numeroPlazas}" />

                        <h:outputLabel value="Fecha Inicial: " style="font-weight: bold;" />
                        <h:outputLabel value="${SessionBeanREC.concursoSeleccionado.fechaInicial}" >
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </h:outputLabel>
                        <h:outputLabel value=""/>
                        <h:outputLabel value="Fecha Final: " style="font-weight: bold;" />
                        <h:outputLabel value="${SessionBeanREC.concursoSeleccionado.fechaFinal}" >
                            <f:convertDateTime pattern="dd/MM/yyyy" />
                        </h:outputLabel>
                        <h:outputLabel value=""/>
                        <h:outputLabel value=""/>
                        <h:outputLabel value=""/>
                    </h:panelGrid>
                </p:panel>
                <p:spacer height="20" />
                <table width="100%" >
                    <tr>
                        <td valign="top">
                            <!-- value="# {SessionBeanREC.concursoSeleccionado.puesto.criteriosXPuestoList}" -->
                            <p:dataTable id="criteriosSeleccionados" 
                                         var="criterio" 
                                         value="#{reclutamiento$preseleccionAspirante.criteriosPrincipales}"
                                         selection="#{SessionBeanREC.criteriosSeleccionados}"
                                         rows="5" 
                                         paginator="true" 
                                         onRowSelectUpdate="tableCanSeleccionados"
                                         onRowUnselectUpdate="tableCanSeleccionados"
                                         emptyMessage="No se han encontrado Criterios."
                                         binding="#{reclutamiento$preseleccionAspirante.tableCriterios}"
                                         paginatorAlwaysVisible="true" 
                                         selectionMode="multiple"
                                         rowSelectListener="#{reclutamiento$preseleccionAspirante.onRowSelectCriterio}"
                                         rowUnselectListener="#{reclutamiento$preseleccionAspirante.onRowUnSelectCriterio}"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100" >

                                <f:facet name="header">  
                                    Criterios por puesto
                                </f:facet>  

                                <p:column sortBy="#{criterio.criterio1.nombre}" 
                                          filterBy="#{criterio.criterio1.nombre}"
                                          filterMatchMode="contains" >
                                    <h:outputLabel value="#{criterio.criterio1.nombre}" />
                                    <h:outputLabel value="#{criterio.descripcionRango}" />
                                </p:column>

                                <f:facet name="footer">  
                                    <p:commandButton oncomplete="botonMostrarCriterios.show()" value="Mostrar mas criterios" image="ui-icon-plusthick" />
                                </f:facet>  
                            </p:dataTable>
                        </td>
                        <td></td>
                        <td valign="top">
                            <p:dataTable id="tableCanSeleccionados"  style="display: inline"
                                         var="candidato" 
                                         value="#{SessionBeanREC.listaCandidatos}"
                                         selection="#{SessionBeanREC.candidatosSeleccionados}"
                                         rows="5" 
                                         paginator="true" 
                                         emptyMessage="No se han encontrado Candidatos."                                     
                                         paginatorAlwaysVisible="true" 
                                         selectionMode="multiple"
                                         binding="#{reclutamiento$preseleccionAspirante.tableCandidatos}"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100" >
                                <f:facet name="header">  
                                    Precandidatos
                                </f:facet>  

                                <p:column sortBy="#{candidato.nombreCompleto}" 
                                          filterBy="#{candidato.nombreCompleto}"
                                          filterMatchMode="contains" >
                                    <p:commandLink>  
                                        <p:graphicImage value="/resources/iconos/personal.png" rendered="#{candidato.sexo eq 'M'}" />   
                                        <p:graphicImage value="/resources/iconos/personal_w.png" rendered="#{candidato.sexo eq 'F'}" />
                                    </p:commandLink> 
                                    <h:outputLabel value="#{candidato.nombreCompleto}" style="margin-left:10px"/>
                                </p:column>
                                <f:facet name="footer" >
                                    <p:commandButton value="Guardar selecci&oacute;n" action="#{reclutamiento$preseleccionAspirante.aplicarCriterios}" image="ui-icon-disk" update="tableCanSeleccionados, principalForm:mensajes" />
                                </f:facet>
                            </p:dataTable>
                        </td>
                    </tr>
                </table>
                <p:spacer height="20" />
            </p:tab>

            <p:tab id="candidatosPreselect" title="Evaluaci&oacute;n"  >
                <p:spacer height="20" />
                <p:panel id="panelCandidatosPre" header="Paso 3 de 5" >
                    <p:spacer height="10" />

                    <p:dataTable id="evCandidatoLst" value="#{reclutamiento$preseleccionAspirante.candidatosGuardados}" 
                                 paginator="true" rows="5"  
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                 rowsPerPageTemplate="5,10,25,50,100" 
                                 var="candidato" dynamic="true" rowEditListener="#{reclutamiento$preseleccionAspirante.onEditCandidato}" >

                        <p:column filterBy="#{candidato.candidato1.nombreCompleto}" filterMatchMode="contains" headerText="Candidato" style="width:450px;" >
                            <p:commandButton image="#{candidato.candidato1.sexo eq 'M' ? 'contratar' : 'contratar_w'}" oncomplete="botonMostrarEvaluacion.show()"  update="principalForm:lbl1,principalForm:lbl2,principalForm:pruebasXEvaluacionEdit" action="#{reclutamiento$preseleccionAspirante.crearEvaluaciones}">
                                <f:setPropertyActionListener value="#{candidato}" target="#{reclutamiento$preseleccionAspirante.candidatoSeleccionado}" />  
                            </p:commandButton>
                            <h:outputText value="#{candidato.candidato1.nombreCompleto}"  style="margin-left:10px" />
                        </p:column>

                        <p:column sortBy="#{candidato.notaEvaluacion}" headerText="Nota Obtenida" style="width:250px; text-align: left;">  
                            <h:outputLabel value="#{candidato.notaEvaluacion}" style="margin-left:10px;">
                                <f:convertNumber maxFractionDigits="2" />
                            </h:outputLabel>
                        </p:column>  

                        <p:column headerText="Observaciones" style="width:250px; text-align: left">  
                            <p:cellEditor  >  
                                <f:facet name="output">  
                                    <h:outputText value="#{candidato.observacion}" />  
                                </f:facet>  
                                <f:facet name="input">  
                                    <p:inputTextarea value="#{candidato.observacion}" style="width:100%"/>  
                                </f:facet>  
                            </p:cellEditor>  
                        </p:column>  

                        <p:column headerText="Ingresar" style="width:50px; text-align: left;">  
                            <p:rowEditor />  
                        </p:column>  

                    </p:dataTable>

                </p:panel>
                <p:spacer height="10" />
            </p:tab>
            <p:tab id="tabSeleccion" title="Selecci&oacute;n"  >
                <p:spacer height="20" />
                <p:panel id="panelSeleccion" header="Paso 4 de 5" >
                    <p:spacer height="20" />
                    <p:dataTable id="candidatoSelection" value="#{reclutamiento$preseleccionAspirante.candidatosGuardados}" var="candidato" paginator="true" rows="5"
                                 update="principalForm:panelSeleccion,principalForm:candidatoSelection"
                                 rowStyleClass="#{candidato.orden lt 6 ? 'candidatoSugerido' : null}" emptyMessage="No ha seleccionado ning&uacute;n candidato."
                                 paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100" binding="#{reclutamiento$preseleccionAspirante.tableSeleccion}" >
                        <f:facet name="header">
                            <h:outputLabel value="Candidatos evaluados" />
                        </f:facet>

                        <p:column headerText="Candidato" >  
                            <p:commandLink>  
                                <p:graphicImage value="/resources/iconos/personal.png" rendered="#{candidato.candidato1.sexo eq 'M'}" />  
                                <p:graphicImage value="/resources/iconos/personal_w.png" rendered="#{candidato.candidato1.sexo eq 'F'}" />
                            </p:commandLink>  
                            <h:outputText value="#{candidato.candidato1.nombreCompleto}" style="margin-left:10px" />  
                        </p:column>

                        <p:column headerText="Sugerido">  
                            <p:graphicImage value="/resources/iconos/rating.png" rendered="#{(candidato.orden lt 6)}" />   
                        </p:column>

                        <p:column headerText="Seleccionado">  
                            <p:commandButton id="cmdSeleccionar" rendered="#{candidato.estado eq 'P'}" action="#{reclutamiento$preseleccionAspirante.seleccionarCandidato}" update="principalForm:mensajes,principalForm:candidatoSelection"  image="nuevo" />
                            <p:tooltip for="cmdSeleccionar" value="Marcar como seleccionado" showEvent="focus" hideEvent="blur"/>                              
                            <p:commandButton id="cmdDesSeleccionar" rendered="#{candidato.estado eq 'S'}" action="#{reclutamiento$preseleccionAspirante.deseleccionarCandidato}" update="principalForm:mensajes,principalForm:candidatoSelection"  image="button-ok" />
                            <p:tooltip for="cmdDesSeleccionar" value="Deseleccionar este candidato" showEvent="focus" hideEvent="blur"/>                              
                            <p:commandButton disabled="true" rendered="#{candidato.estado eq 'C'}" image="contrato" />
                        </p:column>

                    </p:dataTable>
                </p:panel>
                <p:spacer height="20" />
            </p:tab>
            <p:tab id="tabContratacion" title="Contrataci&oacute;n"  >
                <p:spacer height="20" />
                <p:panel id="panelContratacion" header="Paso 5 de 5" >
                    <p:spacer height="20" />

                    <p:dataTable id="candidatoContratar" value="#{reclutamiento$preseleccionAspirante.candidatosContratar}" var="candidato" paginator="true" rows="5"
                                 update="principalForm:panelSeleccion,principalForm:candidatoContratar" emptyMessage="No ha seleccionado ning&uacute;n candidato." binding="#{reclutamiento$preseleccionAspirante.tableContratacion}"
                                 paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,25,50,100"  >
                        <f:facet name="header">
                            <h:outputLabel value="Candidatos a Contratar" />
                        </f:facet>

                        <p:column headerText="Candidato" >  
                            <p:commandLink>  
                                <p:graphicImage value="/resources/iconos/personal.png" rendered="#{candidato.candidato1.sexo eq 'M'}" />  
                                <p:graphicImage value="/resources/iconos/personal_w.png" rendered="#{candidato.candidato1.sexo eq 'F'}" />
                            </p:commandLink>  
                            <h:outputText value="#{candidato.candidato1.nombreCompleto}" style="margin-left:10px" />  
                        </p:column>

                        <p:column headerText="Contratar">  <!--  action="# {reclutamiento$preseleccionAspirante.contratarCandidato}" -->
                            <p:commandButton id="cmdContratar"  disabled="#{candidato.estado eq 'C'}" oncomplete="botonMostrarContrato.show()" image="contrato" update="principalForm:lbl_candidato,principalForm:lbl_puesto,principalForm:lbl_puesto,principalForm:cmdOk,principalForm:txtUsuario,principalForm:mensajesContrato,principalForm:txObservaciones,principalForm:txAreaOAcuerdo,principalForm:calFecFinalCon,principalForm:calFecInicialCon,principalForm:txSalarioCan,principalForm:txtRepresentanteP,principalForm:lst_tipoContrato,principalForm:lst_estadoContrato,principalForm:lst_sucursal,principalForm:lst_tipoPlanilla" >
                                <f:setPropertyActionListener value="#{candidato}" target="#{reclutamiento$preseleccionAspirante.candidatoSeleccionado}" />  
                            </p:commandButton>
                        </p:column>

                        <p:column headerText="Imprimir Contrato"> 
                            <p:commandButton id="cmdImprimirContrato" disabled="#{candidato.estado ne 'C'}"  update="principalForm:mensajes,principalForm:candidatoContratar"  image="documentPDF" />
                        </p:column>

                        <f:facet name="footer">
                            <p:commandButton id="cerrarConcurso" value="Cerrar Concurso" image="ui-icon-circle-close" onclick="confirmation.show()" update="principalForm:mensajes,principalForm:candidatoContratar" />
                        </f:facet>
                    </p:dataTable>

                </p:panel>
                <p:spacer height="20" />
            </p:tab>
        </p:wizard>

        <p:spacer height="20" />

    </ui:define>

</ui:composition>