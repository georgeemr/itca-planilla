<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.prime.com.tr/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                template="/plantillas/defaultTemplate.xhtml"
                xmlns:f="http://java.sun.com/jsf/core">
    <ui:define name="titulo">
        <h:outputText value="Envio Boletas de Pago"/>
    </ui:define>
    <ui:define name="dialogos">
    </ui:define>
    <ui:define name="acciones">
        <p:tab title="Reporte">
            <h:panelGrid columns="1" width="100%" border="0" cellpadding="0" cellspacing="0">
                <p:commandLink styleClass="opcionMenu" action="#{planilla$envioBoletas.enviar$correo$action}" update="principalForm:mensajes" onmouseover="this.className='opcionMenu textonegrita';" onmouseout="this.className='opcionMenu textonormal';" ajax="false">
                    <p:graphicImage value="/resources/iconos/meeting-participant-request-response.png"/>
                    <h:outputText value="Envio de Boletas a Jefes" styleClass="espacioTexto"/>
                </p:commandLink>
            </h:panelGrid>
        </p:tab>
        <p:tab title="Otras acciones">
            <h:panelGrid columns="1">
                <p:commandLink styleClass="opcionMenu textoNormal" ajax="true" action="#{reportes$detalleIngresos.inicio$action}" update="principalForm:mensajes" onmouseover="this.className='opcionMenu textonegrita';" onmouseout="this.className='opcionMenu textonormal';" immediate="true">
                    <p:graphicImage styleClass="/resources/iconos/cancel.png"/>
                    <h:outputText value="Cancelar" styleClass="espacioTexto"/>
                </p:commandLink>
            </h:panelGrid>
        </p:tab>
    </ui:define>
    <ui:define name="contenido">
        <h:panelGrid columns="2" width="100%">
            <p:dataTable emptyMessage="No se han encontrado planillas" 
                         value="#{planilla$envioBoletas.listaProgPla}" var="proPla" id="tbProPla"
                         selectionMode="single" selection="#{planilla$envioBoletas.proPlaSeleccionada}" 
                         rowSelectListener="#{planilla$envioBoletas.onRowSelectProPla}"  
                         rows="3" paginator="true" paginatorAlwaysVisible="true" update="tbPla lstDepto" 
                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="3,5,10,25">>
                <!--f:facet name="header">
                    <h:outputText value="Planilla"/>
                 </f:facet-->
                <p:column headerText="Planilla" filterBy="#{proPla.anio}-#{proPla.mes}-#{proPla.numPlanilla}" filterMatchMode="contains" >
                    <p:graphicImage url="/resources/iconos/view-calendar-journal.png" height="16" width="16"/>
                    <p:spacer width="5"/>
                    <h:outputText value="Planilla #{proPla.anio}-#{proPla.mes}-#{proPla.numPlanilla}"/>
                 </p:column>
                <p:column headerText="Tipo de planilla" sortBy="#{proPla.tiposPlanilla.nomTipopla}" filterBy="#{proPla.tiposPlanilla.nomTipopla}" filterMatchMode="contains">
                    <p:graphicImage url="/resources/iconos/documentinfo.png" height="16" width="16"/>
                    <p:spacer width="5"/>
                    <h:outputText value="#{proPla.tiposPlanilla.nomTipopla}"/>
                 </p:column>
            </p:dataTable>
            <p:spacer height="10"/>
            <h:outputText value="Departamento"/>
            <p:spacer height="10"/>
            <h:selectOneMenu id="lstDepto" value="#{planilla$envioBoletas.codDepto}"
                             style="height: 25px;padding-top: 3px; width: 300px;" valueChangeListener="#{planilla$envioBoletas.depto_change}"  >
                    <f:ajax event="change" execute="lstDepto" />
                    <f:selectItem itemLabel="[Todos]" itemValue=""/>
                    <f:selectItems value="#{planilla$envioBoletas.listaDeptos}" var="depto" itemValue="#{depto.departamentosPK.codDepto}"  itemLabel="#{depto.nomDepto}"/>
             </h:selectOneMenu>
        </h:panelGrid>
    </ui:define>
</ui:composition>